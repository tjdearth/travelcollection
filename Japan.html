<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kirsten Family Japan - Arrival Booklet | Oshinobi Travel</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;500;600&family=Noto+Sans+JP:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Noto Sans JP',sans-serif}
    .font-serif{font-family:'Noto Serif JP',Georgia,serif}
    ::-webkit-scrollbar{width:8px;height:8px}
    ::-webkit-scrollbar-track{background:#FAF7F2}
    ::-webkit-scrollbar-thumb{background:#1E3A5F;border-radius:4px}
    .hide-scrollbar::-webkit-scrollbar{display:none}
    .hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}
    .leaflet-container{font-family:'Noto Sans JP',sans-serif}
    @media print{.no-print{display:none!important}}
  </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const{useState,useRef,useEffect}=React;
// Oshinobi Color Palette - Deep indigo, warm gold, cream
const B={
  p:'#1E3A5F',    // Primary - Deep Indigo/Navy
  g:'#C9A962',    // Gold accent
  cr:'#FAF7F2',   // Cream background
  db:'#2C3E50',   // Dark blue-gray for text
  lt:'#E8E0D5',   // Light tan
  ac:'#4A6FA5'    // Accent blue
};
const H={
  cover:'https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=1600&q=80',
  brief:'https://images.unsplash.com/photo-1545569341-9eb8b30979d9?auto=format&fit=crop&w=1600&q=80',
  map:'https://images.unsplash.com/photo-1528360983277-13d401cdc186?auto=format&fit=crop&w=1600&q=80',
  ess:'https://images.unsplash.com/photo-1524413840807-0c3cb6fa808d?auto=format&fit=crop&w=1600&q=80',
  emg:'https://images.unsplash.com/photo-1490806843957-31f4c9a91c65?auto=format&fit=crop&w=1600&q=80',
  d1:'https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?auto=format&fit=crop&w=1600&q=80',
  d2:'https://images.unsplash.com/photo-1503899036084-c55cdd92da26?auto=format&fit=crop&w=1600&q=80',
  d3:'https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?auto=format&fit=crop&w=1600&q=80',
  d4:'https://images.unsplash.com/photo-1490806843957-31f4c9a91c65?auto=format&fit=crop&w=1600&q=80',
  d5:'https://images.unsplash.com/photo-1553621042-f6e147245754?auto=format&fit=crop&w=1600&q=80',
  d6:'https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=1600&q=80',
  d7:'https://images.unsplash.com/photo-1478436127897-769e1b3f0f36?auto=format&fit=crop&w=1600&q=80',
  d8:'https://images.unsplash.com/photo-1624601573012-efb68931cc8f?auto=format&fit=crop&w=1600&q=80',
  d9:'https://images.unsplash.com/photo-1590559899731-a382839e5549?auto=format&fit=crop&w=1600&q=80',
  d10:'https://images.unsplash.com/photo-1545569341-9eb8b30979d9?auto=format&fit=crop&w=1600&q=80',
  d11:'https://images.unsplash.com/photo-1601823984263-b87b59798b70?auto=format&fit=crop&w=1600&q=80',
  d12:'https://images.unsplash.com/photo-1576675784201-0e142b423952?auto=format&fit=crop&w=1600&q=80',
  d13:'https://images.unsplash.com/photo-1548199569-3e1c6aa8f469?auto=format&fit=crop&w=1600&q=80',
  d14:'https://images.unsplash.com/photo-1436491865332-7a61a109cc05?auto=format&fit=crop&w=1600&q=80'
};
const G={
  asakusa:[{u:'https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?auto=format&fit=crop&w=800&q=80',c:'Tokyo Skyline'},{u:'https://images.unsplash.com/photo-1555952494-efd681c7e3f9?auto=format&fit=crop&w=800&q=80',c:'Sensoji Temple'},{u:'https://images.unsplash.com/photo-1524413840807-0c3cb6fa808d?auto=format&fit=crop&w=800&q=80',c:'Asakusa Area'}],
  lavista:[{u:'https://images.unsplash.com/photo-1490806843957-31f4c9a91c65?auto=format&fit=crop&w=800&q=80',c:'Mt. Fuji View'},{u:'https://images.unsplash.com/photo-1578271887552-5ac3a72752bc?auto=format&fit=crop&w=800&q=80',c:'Lake Kawaguchiko'},{u:'https://images.unsplash.com/photo-1570459027562-4a916cc6113f?auto=format&fit=crop&w=800&q=80',c:'Resort Setting'}],
  cross:[{u:'https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=800&q=80',c:'Kyoto Streets'},{u:'https://images.unsplash.com/photo-1558862107-d49ef2a04d72?auto=format&fit=crop&w=800&q=80',c:'Modern Comfort'},{u:'https://images.unsplash.com/photo-1545569341-9eb8b30979d9?auto=format&fit=crop&w=800&q=80',c:'Temple Views'}],
  kumu:[{u:'https://images.unsplash.com/photo-1601823984263-b87b59798b70?auto=format&fit=crop&w=800&q=80',c:'Kanazawa'},{u:'https://images.unsplash.com/photo-1580537659466-0a9bfa916a54?auto=format&fit=crop&w=800&q=80',c:'Traditional Style'},{u:'https://images.unsplash.com/photo-1542640244-7e672d6cef4e?auto=format&fit=crop&w=800&q=80',c:'Garden View'}],
  sakaeya:[{u:'https://images.unsplash.com/photo-1553653924-39b70295f8da?auto=format&fit=crop&w=800&q=80',c:'Ryokan Interior'},{u:'https://images.unsplash.com/photo-1548199569-3e1c6aa8f469?auto=format&fit=crop&w=800&q=80',c:'Snow Monkeys'},{u:'https://images.unsplash.com/photo-1576675784201-0e142b423952?auto=format&fit=crop&w=800&q=80',c:'Hot Springs'}],
  skytree:[{u:'https://images.unsplash.com/photo-1536098561742-ca998e48cbcc?auto=format&fit=crop&w=800&q=80',c:'Tokyo Skytree'},{u:'https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?auto=format&fit=crop&w=800&q=80',c:'Night View'},{u:'https://images.unsplash.com/photo-1503899036084-c55cdd92da26?auto=format&fit=crop&w=800&q=80',c:'City Lights'}],
  tokyotour:[{u:'https://images.unsplash.com/photo-1555952494-efd681c7e3f9?auto=format&fit=crop&w=800&q=80',c:'Sensoji Temple'},{u:'https://images.unsplash.com/photo-1532236204992-f5e85c024202?auto=format&fit=crop&w=800&q=80',c:'Shibuya'},{u:'https://images.unsplash.com/photo-1542051841857-5f90071e7989?auto=format&fit=crop&w=800&q=80',c:'Tokyo Tower'}],
  ghibli:[{u:'https://images.unsplash.com/photo-1565618754154-c8011e5df2a6?auto=format&fit=crop&w=800&q=80',c:'Mitaka'},{u:'https://images.unsplash.com/photo-1528360983277-13d401cdc186?auto=format&fit=crop&w=800&q=80',c:'Museum Area'},{u:'https://images.unsplash.com/photo-1480796927426-f609979314bd?auto=format&fit=crop&w=800&q=80',c:'Tokyo Culture'}],
  fuji:[{u:'https://images.unsplash.com/photo-1490806843957-31f4c9a91c65?auto=format&fit=crop&w=800&q=80',c:'Mt. Fuji'},{u:'https://images.unsplash.com/photo-1578271887552-5ac3a72752bc?auto=format&fit=crop&w=800&q=80',c:'Five Lakes'},{u:'https://images.unsplash.com/photo-1570459027562-4a916cc6113f?auto=format&fit=crop&w=800&q=80',c:'Scenic Views'}],
  cave:[{u:'https://images.unsplash.com/photo-1553653924-39b70295f8da?auto=format&fit=crop&w=800&q=80',c:'Aokigahara'},{u:'https://images.unsplash.com/photo-1490806843957-31f4c9a91c65?auto=format&fit=crop&w=800&q=80',c:'Forest Trek'},{u:'https://images.unsplash.com/photo-1578271887552-5ac3a72752bc?auto=format&fit=crop&w=800&q=80',c:'Ice Caves'}],
  hakone:[{u:'https://images.unsplash.com/photo-1553621042-f6e147245754?auto=format&fit=crop&w=800&q=80',c:'Hakone'},{u:'https://images.unsplash.com/photo-1492571350019-22de08371fd3?auto=format&fit=crop&w=800&q=80',c:'Torii Gate'},{u:'https://images.unsplash.com/photo-1528360983277-13d401cdc186?auto=format&fit=crop&w=800&q=80',c:'Lake Ashi'}],
  kyototour:[{u:'https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=800&q=80',c:'Geisha District'},{u:'https://images.unsplash.com/photo-1545569341-9eb8b30979d9?auto=format&fit=crop&w=800&q=80',c:'Golden Pavilion'},{u:'https://images.unsplash.com/photo-1558862107-d49ef2a04d72?auto=format&fit=crop&w=800&q=80',c:'Bamboo Grove'}],
  fushimi:[{u:'https://images.unsplash.com/photo-1478436127897-769e1b3f0f36?auto=format&fit=crop&w=800&q=80',c:'Torii Gates'},{u:'https://images.unsplash.com/photo-1492571350019-22de08371fd3?auto=format&fit=crop&w=800&q=80',c:'Mountain Path'},{u:'https://images.unsplash.com/photo-1545569341-9eb8b30979d9?auto=format&fit=crop&w=800&q=80',c:'Shrine'}],
  tea:[{u:'https://images.unsplash.com/photo-1515823064-d6e0c04616a7?auto=format&fit=crop&w=800&q=80',c:'Tea Ceremony'},{u:'https://images.unsplash.com/photo-1558862107-d49ef2a04d72?auto=format&fit=crop&w=800&q=80',c:'Matcha'},{u:'https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?auto=format&fit=crop&w=800&q=80',c:'Traditional Room'}],
  nara:[{u:'https://images.unsplash.com/photo-1624601573012-efb68931cc8f?auto=format&fit=crop&w=800&q=80',c:'Nara Deer'},{u:'https://images.unsplash.com/photo-1590077428593-a55bb07c4665?auto=format&fit=crop&w=800&q=80',c:'Todai-ji'},{u:'https://images.unsplash.com/photo-1528360983277-13d401cdc186?auto=format&fit=crop&w=800&q=80',c:'Kasuga Shrine'}],
  osaka:[{u:'https://images.unsplash.com/photo-1590559899731-a382839e5549?auto=format&fit=crop&w=800&q=80',c:'Osaka Castle'},{u:'https://images.unsplash.com/photo-1553653924-39b70295f8da?auto=format&fit=crop&w=800&q=80',c:'Dotonbori'},{u:'https://images.unsplash.com/photo-1556906781-9a412961c28c?auto=format&fit=crop&w=800&q=80',c:'Street Food'}],
  kanazawa:[{u:'https://images.unsplash.com/photo-1601823984263-b87b59798b70?auto=format&fit=crop&w=800&q=80',c:'Kenrokuen'},{u:'https://images.unsplash.com/photo-1542640244-7e672d6cef4e?auto=format&fit=crop&w=800&q=80',c:'Higashi Chaya'},{u:'https://images.unsplash.com/photo-1580537659466-0a9bfa916a54?auto=format&fit=crop&w=800&q=80',c:'Castle'}],
  snow:[{u:'https://images.unsplash.com/photo-1548199569-3e1c6aa8f469?auto=format&fit=crop&w=800&q=80',c:'Snow Monkeys'},{u:'https://images.unsplash.com/photo-1576675784201-0e142b423952?auto=format&fit=crop&w=800&q=80',c:'Hot Springs'},{u:'https://images.unsplash.com/photo-1553653924-39b70295f8da?auto=format&fit=crop&w=800&q=80',c:'Jigokudani'}]
};
const Logo=({className="",inv=false,size="normal"})=>{
  const h=size==="large"?"h-24":"h-14";
  return(<div className={`flex flex-col items-center ${className}`}><img src="https://cdn.kimkim.com/files/a/companies/logos/3e7734c199d0e3b3746004781459c8b0d2bbabd8/original-9b60cbedcb42e67cf9bce7a9cf25dcdb.jpg" alt="Oshinobi Travel" className={`${h} w-auto object-contain ${inv?'brightness-0 invert':''}`}/></div>);
};
const Ic={
  Menu:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M4 6h16M4 12h16M4 18h16"/></svg>,
  X:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M6 18L18 6M6 6l12 12"/></svg>,
  ChD:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M19 9l-7 7-7-7"/></svg>,
  ChR:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M9 5l7 7-7 7"/></svg>,
  ChL:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M15 19l-7-7 7-7"/></svg>,
  Ph:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>,
  Wa:({c})=><svg className={c} fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>,
  Mp:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>,
  Cl:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>,
  Ca:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M8 17h.01M16 17h.01M9 11h6M5 11l1.5-4.5A2 2 0 018.39 5h7.22a2 2 0 011.89 1.5L19 11M5 11v6a1 1 0 001 1h1a1 1 0 001-1v-1h8v1a1 1 0 001 1h1a1 1 0 001-1v-6M5 11h14"/></svg>,
  Pl:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg>,
  Tr:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><rect x="4" y="3" width="16" height="18" rx="2"/><path d="M12 8v4M8 17h.01M16 17h.01"/></svg>,
  Bd:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>,
  Cm:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><path d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/></svg>,
  Ut:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>,
  Co:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M18 8h1a4 4 0 010 8h-1M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8zM6 1v3M10 1v3M14 1v3"/></svg>,
  Cp:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><circle cx="12" cy="12" r="9"/><path d="M12 3v3M12 18v3M3 12h3M18 12h3"/></svg>,
  Ft:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>,
  Cal:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>,
  Us:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>,
  Sh:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>,
  Dl:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>,
  Ed:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>,
  Ck:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M5 13l4 4L19 7"/></svg>,
  Im:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>,
  Tk:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"/></svg>
};
const Gal=({imgs,name,isExp=false})=>{const ref=useRef(null);const[cL,setCL]=useState(false);const[cR,setCR]=useState(true);const chk=()=>{if(ref.current){const{scrollLeft:l,scrollWidth:w,clientWidth:c}=ref.current;setCL(l>0);setCR(l<w-c-10);}};const scr=(d)=>{if(ref.current){ref.current.scrollBy({left:d==='l'?-280:280,behavior:'smooth'});setTimeout(chk,300);}};useEffect(()=>{chk();},[]);return(<div className="mt-4"><div className="flex items-center justify-between mb-2"><h4 className="text-sm font-medium text-stone-600 flex items-center gap-2"><Ic.Im c="w-4 h-4" s={{color:B.p}}/>{isExp?'Experience Gallery':'Property Gallery'}</h4><div className="flex gap-1"><button onClick={()=>scr('l')} disabled={!cL} className={`p-1 rounded-full ${cL?'bg-stone-100 hover:bg-stone-200':'opacity-30'}`}><Ic.ChL c="w-4 h-4 text-stone-600"/></button><button onClick={()=>scr('r')} disabled={!cR} className={`p-1 rounded-full ${cR?'bg-stone-100 hover:bg-stone-200':'opacity-30'}`}><Ic.ChR c="w-4 h-4 text-stone-600"/></button></div></div><div ref={ref} onScroll={chk} className="flex gap-3 overflow-x-auto hide-scrollbar pb-2">{imgs.map((i,x)=>(<div key={x} className="flex-shrink-0 w-64 group cursor-pointer"><div className="relative h-40 rounded-lg overflow-hidden bg-stone-100"><img src={i.u} alt={i.c} className="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" loading="lazy"/><div className="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"/><span className="absolute bottom-2 left-2 text-white text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity">{i.c}</span></div></div>))}</div></div>);};
const TripMap=({locs,onSelect})=>{const mapRef=useRef(null);const mapInstance=useRef(null);useEffect(()=>{if(!mapRef.current||mapInstance.current)return;const map=L.map(mapRef.current,{scrollWheelZoom:false}).setView([36.5,138],5.5);L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',{attribution:'©OpenStreetMap, ©CartoDB',maxZoom:19}).addTo(map);const mainLocs=locs.filter(l=>!l.dt);if(mainLocs.length>1){const coords=mainLocs.map(l=>[l.lat,l.lng]);L.polyline(coords,{color:B.g,weight:3,opacity:0.7,dashArray:'10,10'}).addTo(map);}locs.forEach((loc,i)=>{const icon=L.divIcon({className:'custom-marker',html:`<div style="background:${loc.c};color:#fff;width:${loc.dt?'24px':'32px'};height:${loc.dt?'24px':'32px'};border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:${loc.dt?'10px':'12px'};box-shadow:0 2px 8px rgba(0,0,0,0.3);border:2px solid #fff;">${loc.dt?'•':loc.num||i+1}</div>`,iconSize:[loc.dt?24:32,loc.dt?24:32],iconAnchor:[loc.dt?12:16,loc.dt?12:16]});const marker=L.marker([loc.lat,loc.lng],{icon}).addTo(map);marker.bindPopup(`<div style="font-family:Noto Sans JP,sans-serif;min-width:140px;"><b style="color:${B.p};font-size:14px;">${loc.n}</b><br/><span style="color:#666;font-size:12px;">${loc.dt?'Day Trip':'Days '+loc.days}</span><br/><span style="font-size:11px;color:#888;">${loc.h}</span></div>`);marker.on('click',()=>onSelect&&onSelect(loc.id));});const bounds=L.latLngBounds(locs.map(l=>[l.lat,l.lng]));map.fitBounds(bounds.pad(0.15));mapInstance.current=map;return()=>{map.remove();mapInstance.current=null;};},[locs]);return(<div className="relative"><div ref={mapRef} className="w-full h-80 md:h-96 rounded-xl overflow-hidden shadow-inner" style={{background:'#f5f5f4'}}/><div className="mt-4 flex flex-wrap gap-3 justify-center">{locs.filter(l=>!l.dt).map((loc)=>(<div key={loc.id} className="flex items-center gap-2 text-sm"><span className="w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-semibold" style={{background:loc.c}}>{loc.num}</span><span className="text-stone-600">{loc.n} <span className="text-stone-400">({loc.days})</span></span></div>))}</div></div>);};
const exportPDF=()=>{const el=document.getElementById('booklet-content');if(!el)return;const opt={margin:[10,10,10,10],filename:`Kirsten-Japan-Booklet.pdf`,image:{type:'jpeg',quality:0.98},html2canvas:{scale:2,useCORS:true,logging:false},jsPDF:{unit:'mm',format:'a4',orientation:'portrait'},pagebreak:{mode:['avoid-all','css','legacy']}};document.body.style.cursor='wait';html2pdf().set(opt).from(el).save().then(()=>{document.body.style.cursor='default';});};
const D={
  name:"Kirsten Family",dest:"Japan",sub:"ようこそ日本へ",dates:"July 5th - 18th, 2025",
  em:{sp:"Emi Matsuda",sp2:"Hiroshi Tsuji",ph:"+81 70-2000-9895",ph2:"+81 80-5009-1526",wa:"817020009895",wa2:"818050091526",em:"info@oshinobi.travel",hotline:"+81-50-3816-2787"},
  locs:[{id:'tokyo1',n:'Tokyo',lat:35.7147,lng:139.7967,days:'1-3',h:'Asakusa View Hotel',c:'#1E3A5F',num:1},{id:'fuji',n:'Mt. Fuji',lat:35.4968,lng:138.7547,days:'4',h:'La Vista Kawaguchiko',c:'#4A6FA5',num:2},{id:'hakone',n:'Hakone',lat:35.2321,lng:139.1069,days:'5',h:'Day Trip',c:'#C9A962',dt:true},{id:'kyoto',n:'Kyoto',lat:35.0116,lng:135.7681,days:'5-9',h:'Cross Hotel Kyoto',c:'#2C3E50',num:3},{id:'nara',n:'Nara',lat:34.6851,lng:135.8048,days:'8',h:'Day Trip',c:'#C9A962',dt:true},{id:'osaka',n:'Osaka',lat:34.6937,lng:135.5023,days:'9',h:'Day Trip',c:'#C9A962',dt:true},{id:'kanazawa',n:'Kanazawa',lat:36.5613,lng:136.6562,days:'10-11',h:'KUMU Kanazawa',c:'#4A6FA5',num:4},{id:'nagano',n:'Nagano',lat:36.6485,lng:138.1950,days:'12-13',h:'Sakaeya Ryokan',c:'#1E3A5F',num:5},{id:'tokyo2',n:'Tokyo',lat:35.7147,lng:139.7967,days:'13-14',h:'Asakusa View Hotel',c:'#2C3E50',num:6}],
  acc:[{d:"Days 1-3, 13-14",n:"Asakusa View Hotel Annex Rokku",l:"Tokyo",dt:"Modern Hotel",ni:4,g:'asakusa',ds:"Located in the heart of historic Asakusa, just steps from Sensoji Temple and Tokyo Skytree. This modern boutique hotel blends Japanese tradition with contemporary comfort, featuring stylish rooms and a top-floor lounge with panoramic city views."},{d:"Day 4",n:"La Vista Fuji Kawaguchiko",l:"Kawaguchiko",dt:"Resort Hotel",ni:1,g:'lavista',ds:"A premium resort with stunning views of Mt. Fuji from Lake Kawaguchiko. The property offers luxurious accommodation with both breakfast and dinner included, plus access to natural hot spring baths with panoramic mountain views."},{d:"Days 5-9",n:"Cross Hotel Kyoto",l:"Kyoto",dt:"Boutique Hotel",ni:5,g:'cross',ds:"A contemporary boutique hotel on Kawaramachi Street in central Kyoto. Modern comfort meets traditional aesthetics with easy access to Gion, Pontocho, and major temples. Breakfast included daily."},{d:"Days 10-11",n:"KUMU Kanazawa",l:"Kanazawa",dt:"Design Hotel",ni:2,g:'kumu',ds:"A stylish design hotel that blends traditional Japanese aesthetics with modern comfort. Features tatami elements and an authentic experience near Kenrokuen Garden and the historic Higashi Chaya district."},{d:"Day 12",n:"Shunran-no-yado Sakaeya",l:"Yudanaka Onsen",dt:"Traditional Ryokan",ni:1,g:'sakaeya',ds:"An intimate traditional ryokan in the hot spring village near the famous Snow Monkey Park. Offers authentic Japanese hospitality with kaiseki dinner, breakfast, and access to natural onsen baths."}],
  itin:[
    {dy:1,dt:"Sat, Jul 5",loc:"Tokyo",hk:'d1',act:[{t:"info",i:"info",ti:"ようこそ! Welcome!",ds:"Pick up your envelope with tickets & IC cards at hotel check-in.",nt:true},{t:"tr",i:"plane",ti:"Arrival at Haneda",tm:"1:55 PM",ds:"Flight UA875. Driver waiting at exit gate with name board.",pr:"Oshinobi Travel",mp:"Haneda Airport Exit"},{t:"tr",i:"plane",ti:"Griffin's Arrival at Narita",tm:"3:00 PM",ds:"Flight UA7938. Separate driver with name board.",pr:"Oshinobi Travel",mp:"Narita Airport Exit"},{t:"act",i:"camera",ti:"Tokyo Skytree",tm:"6:30 PM",dur:"~2 hrs",eds:"Ascend Japan's tallest structure for breathtaking panoramic views of Tokyo's sprawling cityscape at sunset. Tickets are included in your check-in envelope.",g:'skytree',loc:"1-1-2 Oshiage, Sumida City"},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Asakusa View Hotel Annex Rokku",ad:"2-9-10 Asakusa, Taito City, Tokyo",g:'asakusa'}]},
    {dy:2,dt:"Sun, Jul 6",loc:"Tokyo",hk:'d2',act:[{t:"act",i:"compass",ti:"Full-Day Tokyo Tour",tm:"9:00 AM",dur:"~8 hrs",pr:"Guide: Kyoko Kitagawa",ct:"+81 90-6568-1697",mp:"Hotel lobby",eds:"Explore Tokyo's fascinating contrasts with your expert guide. Visit ancient temples, bustling markets, serene gardens, and ultra-modern districts.",g:'tokyotour'},{t:"lei",i:"coffee",ti:"Evening at Leisure",tm:"5:00 PM",ds:"Optional: Explore Tokyo's jazz clubs or visit Tokyo National Museum."},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Asakusa View Hotel Annex Rokku",ad:"2-9-10 Asakusa, Taito City, Tokyo",g:'asakusa'}]},
    {dy:3,dt:"Mon, Jul 7",loc:"Tokyo",hk:'d3',act:[{t:"act",i:"compass",ti:"Tsukiji Fish Market",tm:"11:30 AM",ds:"Meet Hiroshi at Tsukiji Hongan-ji Temple.",pr:"Hiroshi Tsuji",ct:"+81 80-5009-1526",mp:"Tsukiji Hongan-ji Temple"},{t:"act",i:"camera",ti:"Ghibli Museum",tm:"1:00 PM",dur:"~2 hrs",eds:"Step into the magical world of Studio Ghibli at this whimsical museum designed by Hayao Miyazaki himself.",g:'ghibli',loc:"1-1-83 Shimorenjaku, Mitaka",nt2:"No photos inside the museum."},{t:"lei",i:"coffee",ti:"Optional: Shimokitazawa",ds:"Take Keio Inokashira Line from Kichijoji to explore this trendy neighborhood."},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Asakusa View Hotel Annex Rokku",ad:"2-9-10 Asakusa, Taito City, Tokyo",g:'asakusa'}]},
    {dy:4,dt:"Tue, Jul 8",loc:"Mt. Fuji",hk:'d4',act:[{t:"info",i:"info",ti:"Luggage Forward",ds:"Send luggage to Cross Hotel Kyoto at check-out (7:00 AM). It will arrive at your Kyoto hotel.",nt:true},{t:"tr",i:"car",ti:"Transfer to Shinjuku",tm:"7:15 AM",ds:"Driver takes you to Busta Shinjuku. Enter via South Gate, Platform 9/10.",pr:"Oshinobi Travel"},{t:"tr",i:"train",ti:"Fuji Kaiyu Express",tm:"8:30 AM",ds:"Shinjuku → Kawaguchiko (arr. 10:27). Car 2, Seats 5C/5D/6C/6D.",tk:true},{t:"act",i:"camera",ti:"Mt. Fuji Sightseeing",tm:"10:30 AM",dur:"~2.5 hrs",pr:"Oshinobi Travel",eds:"Marvel at Japan's most iconic mountain from the most scenic vantage points around Lake Kawaguchiko.",g:'fuji'},{t:"act",i:"compass",ti:"Jukai Forest & Ice Cave",tm:"1:30 PM",dur:"~2 hrs",pr:"Outback Adventure Tours",ct:"+81-555-20-9266",mp:"Kawaguchiko Station",eds:"Venture into the mystical Aokigahara forest at the base of Mt. Fuji. Explore ancient lava caves.",g:'cave',nt2:"Wear long pants, bring long sleeves. Cave temp: 35-39°F (2-4°C)."},{t:"acc",i:"hotel",ti:"Accommodation",loc:"La Vista Fuji Kawaguchiko",ad:"2395 Kawaguchi, Fujikawaguchiko",g:'lavista'}]},
    {dy:5,dt:"Wed, Jul 9",loc:"Hakone → Kyoto",hk:'d5',act:[{t:"tr",i:"car",ti:"Transfer to Hakone",tm:"9:30 AM",ds:"Driver takes you to Hakone area (~1.5 hrs).",pr:"Oshinobi Travel"},{t:"lei",i:"coffee",ti:"Lunch at Leisure",tm:"~11:00 AM",ds:"Let your driver know your preferred restaurant."},{t:"act",i:"compass",ti:"Hakone Exploration",tm:"12:00 PM",dur:"~6 hrs",pr:"Guide: Kyoko Kitagawa",ct:"+81 90-6568-1697",mp:"Hakone Sekisho",eds:"Discover the natural beauty of Hakone using your included Free Pass. Cruise across Lake Ashi with views of Mt. Fuji.",g:'hakone',nt2:"Hakone Free Pass included in your ticket envelope."},{t:"tr",i:"train",ti:"Shinkansen to Kyoto",tm:"6:07 PM",ds:"Odawara → Kyoto (arr. 8:12 PM). Hikari 653, Car 13, Seats 14D/14E/15D/15E.",tk:true},{t:"tr",i:"car",ti:"Driver to Hotel",tm:"8:15 PM",ds:"Driver meets you at arrival platform.",pr:"Oshinobi Travel"},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Cross Hotel Kyoto",ad:"71-1 Daikokucho, Nakagyo Ward, Kyoto",g:'cross'}]},
    {dy:6,dt:"Thu, Jul 10",loc:"Kyoto",hk:'d6',act:[{t:"act",i:"compass",ti:"Full-Day Kyoto Tour",tm:"9:00 AM",dur:"~8 hrs",pr:"Guide: Shuhei Toyoda",ct:"+81 90-9253-1826",mp:"Hotel lobby",eds:"Immerse yourself in Japan's cultural heart with a private guided tour. Visit iconic temples like Kinkaku-ji and explore Gion.",g:'kyototour'},{t:"act",i:"camera",ti:"Gion Festival Viewing",tm:"5:00 PM",ds:"Your guide will take you to a prime spot to view the famous Gion Matsuri festivities.",eds:"Experience one of Japan's most famous festivals, held annually since 869."},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Cross Hotel Kyoto",ad:"71-1 Daikokucho, Nakagyo Ward, Kyoto",g:'cross'}]},
    {dy:7,dt:"Fri, Jul 11",loc:"Kyoto",hk:'d7',act:[{t:"act",i:"compass",ti:"Fushimi Inari Hike",tm:"9:00 AM",dur:"Flexible",eds:"Walk through thousands of vermillion torii gates at Kyoto's most iconic shrine.",g:'fushimi',loc:"Fushimi Inari Taisha",nt2:"Wear long sleeves (insect protection). Stay hydrated!"},{t:"act",i:"utensils",ti:"Japanese Tea Ceremony",tm:"2:30 PM",dur:"~1 hr",pr:"Ami Kyoto",ct:"+81 70-6423-0191",loc:"605 Nishida-cho, Shimogyo-ku",eds:"Experience the meditative art of traditional Japanese tea ceremony in an authentic setting.",g:'tea',nt2:"Use restroom beforehand (limited facilities)."},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Cross Hotel Kyoto",ad:"71-1 Daikokucho, Nakagyo Ward, Kyoto",g:'cross'}]},
    {dy:8,dt:"Sat, Jul 12",loc:"Nara Day Trip",hk:'d8',act:[{t:"info",i:"info",ti:"Train Instructions",ds:"Take taxi to Kyoto Station Hachijo Exit (south side). Head to Kintetsu Kyoto Station, NOT JR lines.",nt:true},{t:"tr",i:"train",ti:"Aoniyoshi Express to Nara",tm:"10:55 AM",ds:"Kyoto → Kintetsu Nara (arr. 11:31). Salon Seats, Car 2, Seats 1A/1B/1C/1D.",tk:true,nt2:"Look for the distinctive red train."},{t:"act",i:"compass",ti:"Self-Guided Nara",tm:"11:30 AM",dur:"~6 hrs",eds:"Explore Japan's first permanent capital. Visit Todai-ji Temple and meet the sacred deer.",g:'nara',loc:"Nara Park area"},{t:"tr",i:"train",ti:"Return to Kyoto",tm:"5:55 PM",ds:"Kintetsu Nara → Kyoto (arr. 6:30 PM). Car 2, Seats 3A/3B/4A/4B.",tk:true},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Cross Hotel Kyoto",ad:"71-1 Daikokucho, Nakagyo Ward, Kyoto",g:'cross'}]},
    {dy:9,dt:"Sun, Jul 13",loc:"Osaka Day Trip",hk:'d9',act:[{t:"tr",i:"car",ti:"Transfer to Kyoto Station",tm:"10:00 AM",pr:"Oshinobi Travel"},{t:"tr",i:"train",ti:"Shinkansen to Osaka",tm:"10:46 AM",ds:"Kyoto → Shin-Osaka (arr. 11:00). Nozomi 17, Car 12, Seats 2D/2E/3D/3E.",tk:true},{t:"act",i:"compass",ti:"Self-Guided Osaka",tm:"11:00 AM",dur:"~6.5 hrs",eds:"Discover Japan's kitchen in this vibrant, food-loving city. Explore Osaka Castle and Dotonbori.",g:'osaka',loc:"Osaka Castle, Dotonbori, Kuromon Market"},{t:"info",i:"info",ti:"Return Train",ds:"Purchase Shinkansen ticket at JR Ticket Office (Midori-no-madoguchi). Last Shinkansen: 10:30 PM.",nt:true},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Cross Hotel Kyoto",ad:"71-1 Daikokucho, Nakagyo Ward, Kyoto",g:'cross'}]},
    {dy:10,dt:"Mon, Jul 14",loc:"Kyoto → Kanazawa",hk:'d10',act:[{t:"tr",i:"car",ti:"Transfer to Kyoto Station",tm:"11:50 AM",pr:"Oshinobi Travel"},{t:"tr",i:"train",ti:"Thunderbird to Tsuruga",tm:"12:40 PM",ds:"Kyoto → Tsuruga (arr. 1:33 PM). Thunderbird 21, Car 6, Seats 15C/15D/16C/16D.",tk:true},{t:"info",i:"info",ti:"Transit at Tsuruga",ds:"Go to 2F, enter Shinkansen Transfer Gate, then up to 3F for platform.",nt:true},{t:"tr",i:"train",ti:"Shinkansen to Kanazawa",tm:"1:48 PM",ds:"Tsuruga → Kanazawa (arr. 2:46 PM). Hakutaka 568, Car 5, Seats 16D/16E/17D/17E.",tk:true},{t:"tr",i:"car",ti:"Driver to Hotel",tm:"2:50 PM",ds:"Driver meets you at Shinkansen Ticket Gate.",pr:"Oshinobi Travel"},{t:"acc",i:"hotel",ti:"Accommodation",loc:"KUMU Kanazawa",ad:"2-40 Kamitsutsumicho, Kanazawa",g:'kumu'}]},
    {dy:11,dt:"Tue, Jul 15",loc:"Kanazawa",hk:'d11',act:[{t:"act",i:"compass",ti:"Self-Guided Kanazawa",tm:"9:00 AM",dur:"Full day",eds:"Explore one of Japan's best-preserved Edo-era cities. Wander through Kenrokuen, one of Japan's three most beautiful gardens.",g:'kanazawa',loc:"Kenrokuen, Castle, Higashi Chaya, Omicho Market"},{t:"lei",i:"coffee",ti:"Optional: Shirakawago",ds:"Take shuttle bus from Kanazawa Station to this UNESCO village with traditional thatched-roof farmhouses."},{t:"acc",i:"hotel",ti:"Accommodation",loc:"KUMU Kanazawa",ad:"2-40 Kamitsutsumicho, Kanazawa",g:'kumu'}]},
    {dy:12,dt:"Wed, Jul 16",loc:"Kanazawa → Nagano",hk:'d12',act:[{t:"tr",i:"car",ti:"Transfer to Kanazawa Station",tm:"12:10 PM",pr:"Oshinobi Travel"},{t:"tr",i:"train",ti:"Shinkansen to Nagano",tm:"12:58 PM",ds:"Kanazawa → Nagano (arr. 2:24 PM). Hakutaka 564, Car 8, Seats 16D/16E/17D/17E.",tk:true},{t:"tr",i:"car",ti:"Driver to Ryokan",tm:"2:30 PM",ds:"Driver meets you at Shinkansen Ticket Gate.",pr:"Oshinobi Travel"},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Shunran-no-yado Sakaeya",ad:"2171 Hirao, Yamanochi, Nagano",g:'sakaeya'}]},
    {dy:13,dt:"Thu, Jul 17",loc:"Snow Monkeys → Tokyo",hk:'d13',act:[{t:"act",i:"camera",ti:"Snow Monkey Park",tm:"10:00 AM",dur:"~2.5 hrs",ds:"Ryokan shuttle to/from park. 30-min walk each way.",eds:"Visit the famous Jigokudani Monkey Park, home to wild Japanese macaques who bathe in natural hot springs.",g:'snow',loc:"6845 Hirao, Yamanochi",nt2:"Wear comfortable walking shoes for forest path."},{t:"tr",i:"car",ti:"Ryokan Shuttle Return",tm:"1:00 PM"},{t:"tr",i:"car",ti:"Transfer to Nagano Station",tm:"1:40 PM",pr:"Oshinobi Travel"},{t:"tr",i:"train",ti:"Shinkansen to Tokyo",tm:"3:22 PM",ds:"Nagano → Tokyo (arr. 4:52 PM). Hakutaka 566, Car 7, Seats 4D/4E/5D/5E.",tk:true},{t:"tr",i:"car",ti:"Driver to Hotel",tm:"5:00 PM",ds:"Exit from Marunouchi North Exit. Driver at taxi stand.",pr:"Oshinobi Travel"},{t:"acc",i:"hotel",ti:"Accommodation",loc:"Asakusa View Hotel Annex Rokku",ad:"2-9-10 Asakusa, Taito City, Tokyo",g:'asakusa'}]},
    {dy:14,dt:"Fri, Jul 18",loc:"Departure",hk:'d14',act:[{t:"lei",i:"coffee",ti:"Morning at Leisure",ds:"Final shopping or temple visits in Asakusa."},{t:"tr",i:"car",ti:"Transfer to Haneda",tm:"1:15 PM",ds:"Driver meets you at hotel.",pr:"Oshinobi Travel"},{t:"tr",i:"plane",ti:"Departure",tm:"5:15 PM",ds:"Tokyo Haneda International Airport. Safe travels!"},{t:"info",i:"info",ti:"また会いましょう!",ds:"Thank you for traveling with Oshinobi. We hope to see you again!",nt:true}]}
  ]
};
const getIc=(t,c,s)=>{const m={car:Ic.Ca,plane:Ic.Pl,train:Ic.Tr,hotel:Ic.Bd,camera:Ic.Cm,utensils:Ic.Ut,coffee:Ic.Co,compass:Ic.Cp,info:Ic.Ft,ticket:Ic.Tk};const I=m[t]||Ic.Cal;return <I c={`w-5 h-5 ${c}`} s={s}/>;};
function App(){
  const[menu,setMenu]=useState(false);const[sec,setSec]=useState('cover');const[exp,setExp]=useState({});const[edit,setEdit]=useState(false);const[notes,setNotes]=useState({});const[tab,setTab]=useState('ov');const[hero,setHero]=useState(H.cover);const refs=useRef({});
  const toc=[{id:'cover',l:'Cover'},{id:'brief',l:'Travel Brief'},{id:'map',l:'Journey'},{id:'ess',l:'Essentials'},...D.itin.map(d=>({id:`d${d.dy}`,l:`Day ${d.dy}`,s:d.loc})),{id:'emg',l:'Emergency'}];
  const goTo=(id)=>{setMenu(false);setSec(id);updH(id);refs.current[id]?.scrollIntoView({behavior:'smooth'});};
  const updH=(id)=>{if(id==='cover')setHero(H.cover);else if(id==='brief')setHero(H.brief);else if(id==='map')setHero(H.map);else if(id==='ess')setHero(H.ess);else if(id==='emg')setHero(H.emg);else{const d=D.itin.find(x=>`d${x.dy}`===id);if(d?.hk)setHero(H[d.hk]);}};
  const tog=(di,ai)=>setExp(p=>({...p,[`${di}-${ai}`]:!p[`${di}-${ai}`]}));
  useEffect(()=>{const obs=new IntersectionObserver((e)=>{e.forEach(x=>{if(x.isIntersecting){const id=x.target.getAttribute('data-s');if(id){setSec(id);updH(id);}}});},{threshold:0.3});Object.entries(refs.current).forEach(([id,el])=>{if(el){el.setAttribute('data-s',id);obs.observe(el);}});return()=>obs.disconnect();},[]);
  return(
    <div className="min-h-screen" style={{backgroundColor:B.cr}}>
      <header className="fixed top-0 right-0 left-0 lg:left-1/2 z-50 backdrop-blur-sm border-b" style={{backgroundColor:`${B.cr}f2`,borderColor:B.lt}}>
        <div className="flex items-center justify-between px-4 py-3">
          <button onClick={()=>setMenu(!menu)} className="p-2 hover:bg-stone-100 rounded-full">{menu?<Ic.X c="w-6 h-6" style={{color:B.db}}/>:<Ic.Menu c="w-6 h-6" style={{color:B.db}}/>}</button>
          <Logo className="scale-75"/>
          <div className="flex items-center gap-1">
            <button onClick={()=>setEdit(!edit)} className="p-2 rounded-full" style={{backgroundColor:edit?'#E8F4FD':'transparent',color:edit?B.p:'#57534e'}}><Ic.Ed c="w-5 h-5"/></button>
            <button className="p-2 hover:bg-stone-100 rounded-full"><Ic.Sh c="w-5 h-5 text-stone-600"/></button>
            <button onClick={exportPDF} className="p-2 hover:bg-stone-100 rounded-full" title="Download PDF"><Ic.Dl c="w-5 h-5 text-stone-600"/></button>
            <a href={`https://wa.me/${D.em.wa}?text=${encodeURIComponent('Hello! I am a guest on the Kirsten Family Japan trip.')}`} target="_blank" rel="noopener noreferrer" className="p-2 hover:bg-stone-100 rounded-full text-green-600" title="WhatsApp"><Ic.Wa c="w-5 h-5"/></a>
          </div>
        </div>
        {edit&&<div className="border-t px-4 py-2 flex items-center justify-between" style={{backgroundColor:'#E8F4FD',borderColor:B.ac}}><span className="text-sm" style={{color:B.p}}><b>Edit Mode</b> — Ops notes only</span><button onClick={()=>setEdit(false)} className="text-sm font-medium flex items-center gap-1" style={{color:B.p}}><Ic.Ck c="w-4 h-4"/>Save</button></div>}
      </header>
      <div className={`fixed inset-0 z-40 transition-all ${menu?'visible':'invisible'}`}>
        <div className={`absolute inset-0 bg-black/30 transition-opacity ${menu?'opacity-100':'opacity-0'}`} onClick={()=>setMenu(false)}/>
        <div className={`absolute top-0 left-0 lg:left-1/2 bottom-0 w-80 text-stone-100 transform transition-transform ${menu?'translate-x-0':'-translate-x-full'}`} style={{backgroundColor:B.p}}>
          <div className="p-6 pt-20 h-full overflow-y-auto">
            <h2 className="text-lg font-light mb-6">Table of Contents</h2>
            <nav className="space-y-1">{toc.map(t=>(<button key={t.id} onClick={()=>goTo(t.id)} className={`w-full text-left py-2 px-3 rounded-lg flex items-center gap-3 ${sec===t.id?'bg-white/10 text-white':'text-stone-300 hover:bg-white/5'}`}><span className="w-1.5 h-1.5 rounded-full" style={{backgroundColor:sec===t.id?B.g:'#78716c'}}/><div><span className="text-sm">{t.l}</span>{t.s&&<span className="text-xs text-stone-400 ml-2">{t.s}</span>}</div></button>))}</nav>
          </div>
        </div>
      </div>
      <div className="flex min-h-screen">
        <div className="hidden lg:block lg:w-1/2 fixed left-0 top-0 bottom-0 no-print"><div className="w-full h-full bg-cover bg-center transition-all duration-700" style={{backgroundImage:`url(${hero})`}}><div className="absolute inset-0 bg-gradient-to-r from-black/20 to-transparent"/></div></div>
        <div id="booklet-content" className="w-full lg:w-1/2 lg:ml-[50%]">
          <section ref={el=>refs.current['cover']=el} className="min-h-screen flex flex-col items-center justify-center px-6 py-24 relative" style={{backgroundColor:B.cr}}>
            <div className="lg:hidden absolute inset-0 bg-cover bg-center opacity-20" style={{backgroundImage:`url(${H.cover})`}}/>
            <div className="relative z-10 text-center max-w-md">
              <Logo className="mx-auto mb-8" size="large"/>
              <h1 className="font-serif text-4xl md:text-5xl mb-3" style={{color:B.p}}>{D.name}</h1>
              <div className="w-16 h-px mx-auto mb-4" style={{backgroundColor:B.g}}/>
              <p className="text-2xl font-serif mb-1" style={{color:B.p}}>{D.sub}</p>
              <p className="text-sm tracking-widest uppercase mt-2" style={{color:B.g}}>{D.dates}</p>
              <p className="font-medium mt-3 text-lg" style={{color:B.db}}>{D.dest}</p>
            </div>
            <div className="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce"><Ic.ChD c="w-6 h-6" s={{color:B.p}}/></div>
          </section>
          <section ref={el=>refs.current['brief']=el} className="min-h-screen px-6 py-20 bg-white">
            <h2 className="font-serif text-3xl text-center mb-10" style={{color:B.p}}>Travel Brief</h2>
            <div className="flex justify-center gap-6 mb-8 border-b border-stone-200">{[{id:'ov',l:'Overview',I:Ic.Cal},{id:'ac',l:'Accommodation',I:Ic.Bd}].map(t=>(<button key={t.id} onClick={()=>setTab(t.id)} className={`flex items-center gap-2 pb-3 px-3 border-b-2 ${tab===t.id?'text-stone-800':'border-transparent text-stone-400'}`} style={tab===t.id?{borderColor:B.p}:{}}><t.I c="w-4 h-4"/><span className="text-sm">{t.l}</span></button>))}</div>
            {tab==='ov'&&(<div className="max-w-2xl mx-auto overflow-x-auto"><table className="w-full text-sm"><thead><tr className="border-b border-stone-200"><th className="py-3 text-left text-stone-500 font-normal">Day</th><th className="py-3 text-left text-stone-500 font-normal">Location</th><th className="py-3 text-left text-stone-500 font-normal">Highlights</th></tr></thead><tbody>{D.itin.map((d,i)=>(<tr key={i} className="border-b border-stone-100"><td className="py-3 align-top"><span className="font-medium" style={{color:B.p}}>{d.dy}</span><br/><span className="text-xs text-stone-400">{d.dt}</span></td><td className="py-3 align-top text-stone-700">{d.loc}</td><td className="py-3 align-top text-stone-600">{d.act.filter(a=>a.t==='act').map(a=>a.ti).join(', ')||'Travel / Leisure'}</td></tr>))}</tbody></table></div>)}
            {tab==='ac'&&(<div className="max-w-2xl mx-auto space-y-4">{D.acc.map((a,i)=>(<div key={i} className="border border-stone-200 rounded-xl p-4 hover:shadow-sm transition-shadow"><div className="flex items-start gap-4"><div className="p-2 rounded-lg" style={{backgroundColor:'#E8F4FD'}}><Ic.Bd c="w-5 h-5" s={{color:B.p}}/></div><div className="flex-1"><p className="text-xs text-stone-400 uppercase tracking-wide">{a.d}</p><h3 className="font-medium text-stone-800">{a.n}</h3><p className="text-sm text-stone-500">{a.l} • {a.dt}</p></div></div></div>))}</div>)}
          </section>
          <section ref={el=>refs.current['map']=el} className="min-h-screen px-6 py-20" style={{backgroundColor:B.cr}}>
            <h2 className="font-serif text-3xl text-center mb-3" style={{color:B.p}}>Your Journey</h2>
            <p className="text-center text-stone-500 mb-8">Tokyo → Mt. Fuji → Kyoto → Kanazawa → Nagano → Tokyo</p>
            <div className="max-w-3xl mx-auto">
              <TripMap locs={D.locs} onSelect={(id)=>{const loc=D.locs.find(l=>l.id===id);if(loc&&!loc.dt){const dayNum=parseInt(loc.days.split('-')[0]);goTo(`d${dayNum}`);}}}/>
              <div className="mt-8 bg-white rounded-xl p-5 shadow-sm">
                <h3 className="text-sm font-medium text-stone-700 mb-4">Accommodations</h3>
                <div className="space-y-3">{D.acc.map((a,i)=>(<div key={i} className="flex items-start gap-3 p-3 rounded-lg hover:bg-stone-50 transition-colors"><span className="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold shrink-0" style={{background:D.locs[Math.min(i,D.locs.length-1)]?.c||B.p}}>{i+1}</span><div className="flex-1 min-w-0"><h4 className="font-medium text-stone-800 text-sm">{a.n}</h4><p className="text-stone-500 text-xs">{a.d} • {a.l}</p><p className="text-stone-400 text-xs mt-0.5">{a.dt}</p></div><a href={`https://maps.google.com/?q=${encodeURIComponent(a.n+' '+a.l+' Japan')}`} target="_blank" rel="noopener noreferrer" className="p-2 rounded-full hover:bg-stone-100" style={{color:B.p}}><Ic.Mp c="w-4 h-4"/></a></div>))}</div>
              </div>
            </div>
          </section>
          <section ref={el=>refs.current['ess']=el} className="min-h-screen px-6 py-20 bg-white">
            <h2 className="font-serif text-3xl text-center mb-10" style={{color:B.p}}>Travel Essentials</h2>
            <div className="max-w-2xl mx-auto space-y-4">{[{I:Ic.Tk,ti:'Tickets & IC Cards',tx:'Receive your envelope with all tickets and Suica IC cards at hotel check-in on Day 1.',hi:true},{I:Ic.Ph,ti:'Japan Visitor Hotline',tx:'24/7 support: +81-50-3816-2787 (JNTO operated)',hi:false},{I:Ic.Ft,ti:'Ghibli Museum',tx:'No photography inside. Tickets will be brought by Hiroshi on the day.',hi:false},{I:Ic.Us,ti:'Temple Etiquette',tx:'Remove shoes when entering. Bow at torii gates. No flash photography.',hi:false}].map((it,i)=>(<div key={i} className="rounded-xl p-5 border" style={{backgroundColor:it.hi?'#E8F4FD':'#fafaf9',borderColor:it.hi?B.p:'#e7e5e4'}}><h3 className="font-medium text-stone-800 mb-2 flex items-center gap-2"><it.I c="w-5 h-5" s={{color:it.hi?B.p:B.db}}/>{it.ti}</h3><p className="text-stone-600 text-sm">{it.tx}</p></div>))}</div>
          </section>
          {D.itin.map((day,di)=>(<section key={day.dy} ref={el=>refs.current[`d${day.dy}`]=el} className="min-h-screen px-6 py-20" style={{backgroundColor:di%2===0?'#fff':B.cr}}>
            <div className="lg:hidden -mx-6 -mt-20 mb-6 h-48 bg-cover bg-center relative" style={{backgroundImage:`url(${H[day.hk]})`}}><div className="absolute inset-0 bg-gradient-to-t from-white via-transparent to-transparent"/></div>
            <div className="max-w-2xl mx-auto">
              <div className="text-center mb-10"><p className="text-xs text-stone-400 tracking-widest uppercase mb-1">{day.dt}</p><h2 className="font-serif text-3xl" style={{color:B.p}}>Day {day.dy}</h2><p className="mt-1" style={{color:B.db}}>{day.loc}</p></div>
              <div className="space-y-4">{day.act.map((a,ai)=>{const isExp=exp[`${di}-${ai}`];const nk=`${di}-${ai}`;const isExperience=a.t==='act';const accInfo=a.t==='acc'&&a.g?D.acc.find(x=>x.g===a.g):null;return(<div key={ai} className={`rounded-xl border transition-all ${isExperience?'bg-gradient-to-br from-white to-stone-50 shadow-sm':a.nt?'bg-blue-50':'bg-white'}`} style={isExperience?{borderColor:B.p,borderWidth:'1.5px'}:a.nt?{borderColor:B.p}:{borderColor:'#e7e5e4'}}><div className={`p-4 ${a.t!=='info'?'cursor-pointer':''}`} onClick={()=>a.t!=='info'&&tog(di,ai)}><div className="flex items-start gap-3"><div className={`p-2 rounded-lg ${isExperience?'':'shrink-0'}`} style={{backgroundColor:isExperience?B.p:a.nt?'#DBEAFE':'#f5f5f4'}}>{getIc(a.i,isExperience?'text-white':'',{color:isExperience?'#fff':a.nt?B.p:B.db})}</div><div className="flex-1 min-w-0"><div className="flex items-start justify-between gap-2"><div>{isExperience&&<span className="inline-block text-xs font-medium tracking-wide uppercase px-2 py-0.5 rounded mb-1.5" style={{backgroundColor:B.g,color:'#fff'}}>Experience</span>}<h3 className={`font-medium text-stone-800 ${isExperience?'text-base':'text-sm'}`}>{a.ti}</h3>{a.tm&&<p className={`${isExperience?'text-sm font-medium':'text-sm'} mt-0.5`} style={{color:B.p}}>{a.tm}</p>}{a.loc&&<p className="text-sm text-stone-500 mt-0.5">{a.loc}</p>}</div>{a.t!=='info'&&<Ic.ChR c={`w-5 h-5 text-stone-400 transition-transform ${isExp?'rotate-90':''}`}/>}</div>{a.nt&&<p className="text-sm mt-2 italic" style={{color:B.p}}>{a.ds}</p>}{a.t==='acc'&&a.ad&&<a href={`https://maps.google.com/search/${encodeURIComponent(a.ad)}`} target="_blank" rel="noopener noreferrer" className="text-sm mt-1 flex items-center gap-1 hover:opacity-70" style={{color:B.p}}><Ic.Mp c="w-4 h-4" s={{color:B.p}}/><span className="truncate">{a.ad}</span></a>}</div></div></div>{isExp&&a.t!=='info'&&(<div className="px-4 pb-4 border-t border-stone-100 pt-3"><div className="ml-11 space-y-3 text-sm">{isExperience&&a.eds&&<p className="text-stone-600 leading-relaxed">{a.eds}</p>}{!isExperience&&a.ds&&<p className="text-stone-600">{a.ds}</p>}{a.dur&&<div className="flex items-center gap-2 text-stone-500"><Ic.Cl c="w-4 h-4"/>Duration: {a.dur}</div>}{a.mp&&<div><span className="text-stone-500">Meeting: </span><span style={{color:B.p}}>{a.mp}</span></div>}{a.pr&&<div><span className="text-stone-500">Provider: </span><span className="text-stone-700">{a.pr}</span></div>}{a.ct&&<div><span className="text-stone-500">Contact: </span><a href={`tel:${a.ct.replace(/[^0-9+]/g,'')}`} className="hover:underline" style={{color:B.p}}>{a.ct}</a></div>}{a.nt2&&<div className="bg-amber-50 border border-amber-200 rounded-lg p-2.5 text-amber-800"><b>Note:</b> {a.nt2}</div>}{a.tk&&<div className="rounded-lg p-2.5 flex items-center gap-2" style={{backgroundColor:'#E8F4FD',border:`1px solid ${B.p}`,color:B.p}}><Ic.Tk c="w-4 h-4"/>Ticket in envelope</div>}{accInfo&&<div className="bg-stone-50 rounded-lg p-3 mt-2"><h4 className="text-sm font-medium text-stone-700 mb-1.5">About {accInfo.n}</h4><p className="text-stone-600 text-sm leading-relaxed">{accInfo.ds}</p></div>}{a.g&&G[a.g]&&<Gal imgs={G[a.g]} name={isExperience?a.ti:a.loc} isExp={isExperience}/>}{edit&&(<div className="border-2 border-dashed rounded-lg p-2.5" style={{borderColor:B.p,backgroundColor:'#E8F4FD'}}><label className="text-xs font-medium block mb-1" style={{color:B.p}}>Ops Note</label><textarea value={notes[nk]||''} onChange={e=>setNotes(p=>({...p,[nk]:e.target.value}))} placeholder="Add note..." className="w-full text-sm p-2 border rounded bg-white focus:outline-none" style={{borderColor:B.p}} rows={2} maxLength={200}/><p className="text-xs mt-1 text-right" style={{color:B.p}}>{(notes[nk]||'').length}/200</p></div>)}{!edit&&notes[nk]&&<div className="bg-amber-50 border border-amber-200 rounded-lg p-2.5 text-amber-800"><b>Note:</b> {notes[nk]}</div>}</div></div>)}</div>);})}</div>
            </div>
          </section>))}
          <section ref={el=>refs.current['emg']=el} className="min-h-screen px-6 py-20 text-stone-100" style={{backgroundColor:B.p}}>
            <h2 className="font-serif text-3xl text-white text-center mb-10">Emergency Contacts</h2>
            <div className="max-w-2xl mx-auto">
              <div className="bg-white/10 backdrop-blur-sm rounded-xl p-6 space-y-5">
                <div><h3 className="text-sm tracking-wide uppercase mb-2" style={{color:B.g}}>Weekdays until 6 PM JST</h3><p className="text-stone-300 mb-2">Specialist: <span className="text-white font-medium">{D.em.sp}</span></p><div className="flex flex-wrap gap-3"><a href={`tel:${D.em.ph}`} className="inline-flex items-center gap-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors"><Ic.Ph c="w-5 h-5"/><span>{D.em.ph}</span></a><a href={`https://wa.me/${D.em.wa}?text=${encodeURIComponent('Hello! I am a guest on the Kirsten Family Japan trip and need assistance.')}`} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors"><Ic.Wa c="w-5 h-5"/><span>WhatsApp</span></a></div></div>
                <div className="border-t border-white/20 pt-5"><h3 className="text-sm tracking-wide uppercase mb-2" style={{color:B.g}}>All Other Times</h3><p className="text-stone-300 mb-2">Specialist: <span className="text-white font-medium">{D.em.sp2}</span></p><div className="flex flex-wrap gap-3"><a href={`tel:${D.em.ph2}`} className="inline-flex items-center gap-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors"><Ic.Ph c="w-5 h-5"/><span>{D.em.ph2}</span></a><a href={`https://wa.me/${D.em.wa2}?text=${encodeURIComponent('Hello! I am a guest on the Kirsten Family Japan trip and need assistance.')}`} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors"><Ic.Wa c="w-5 h-5"/><span>WhatsApp</span></a></div></div>
                <div className="border-t border-white/20 pt-5"><h3 className="text-sm tracking-wide uppercase mb-2" style={{color:B.g}}>24-Hour Hotlines</h3><p className="text-stone-300 text-sm mb-2">Japan Visitor Hotline (JNTO): <a href="tel:+81-50-3816-2787" className="text-white hover:underline">{D.em.hotline}</a></p><p className="text-stone-300 text-sm">Police: <span className="text-white">110</span> • Ambulance/Fire: <span className="text-white">119</span></p></div>
                <div className="border-t border-white/20 pt-5"><p className="text-stone-400 text-sm italic">Please contact Oshinobi Travel before reaching out to guides directly.</p></div>
              </div>
              <div className="text-center mt-10"><p className="text-stone-300 text-sm">素晴らしい旅を!</p><p className="font-medium mt-1" style={{color:B.g}}>Oshinobi Travel Team</p></div>
            </div>
          </section>
          <footer className="py-10 px-6 text-center" style={{backgroundColor:B.p}}><Logo className="mx-auto mb-3 opacity-90" inv/><p className="text-stone-300 text-sm">© 2025 Oshinobi Travel</p><p className="text-stone-400 text-xs mt-1">Last updated: Jan 20, 2026</p></footer>
        </div>
      </div>
      <a href={`https://wa.me/${D.em.wa}?text=${encodeURIComponent('Hello! I am a guest on the Kirsten Family Japan trip.')}`} target="_blank" rel="noopener noreferrer" className="fixed bottom-5 right-5 text-white px-5 py-2.5 rounded-full shadow-lg hover:scale-105 transition-all flex items-center gap-2 z-30 no-print" style={{backgroundColor:'#25D366'}}><Ic.Wa c="w-5 h-5"/><span className="font-medium">WhatsApp</span></a>
    </div>
  );
}
ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
