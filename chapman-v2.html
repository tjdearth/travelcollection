<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapman Family Italy - Arrival Booklet | Authenticus Italy</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;1,400&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Source Sans 3',sans-serif}
    .font-serif{font-family:'Cormorant Garamond',Georgia,serif}
    ::-webkit-scrollbar{width:8px;height:8px}
    ::-webkit-scrollbar-track{background:#f5f5f4}
    ::-webkit-scrollbar-thumb{background:#C4A962;border-radius:4px}
    .hide-scrollbar::-webkit-scrollbar{display:none}
    .hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}
    .leaflet-container{font-family:'Source Sans 3',sans-serif}
    .wa-panel{animation:slideUp 0.3s ease-out}
    @keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    .pulse-ring{animation:pulseRing 2s infinite}
    @keyframes pulseRing{0%{box-shadow:0 0 0 0 rgba(37,211,102,0.4)}70%{box-shadow:0 0 0 15px rgba(37,211,102,0)}100%{box-shadow:0 0 0 0 rgba(37,211,102,0)}}
    @media print{
      .no-print{display:none!important}
      body{-webkit-print-color-adjust:exact;print-color-adjust:exact}
      .min-h-screen{min-height:auto!important;page-break-inside:avoid}
      section{page-break-after:auto;page-break-inside:avoid}
      .fixed{position:static!important}
      .lg\\:w-1\\/2{width:100%!important;margin-left:0!important}
      .lg\\:block.fixed{display:none!important}
      .bg-cover{background-size:cover!important}
      h2{page-break-after:avoid}
    }
  </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const{useState,useRef,useEffect}=React;
const B={dg:'#2D4739',g:'#C4A962',cr:'#FAF8F5'};
const H={
  cover:'https://images.unsplash.com/photo-1515859005217-8a1f08870f59?auto=format&fit=crop&w=1600&q=80',
  brief:'https://images.unsplash.com/photo-1529260830199-42c24126f198?auto=format&fit=crop&w=1600&q=80',
  map:'https://images.unsplash.com/photo-1516483638261-f4dbaf036963?auto=format&fit=crop&w=1600&q=80',
  ess:'https://images.unsplash.com/photo-1499678329028-101435549a4e?auto=format&fit=crop&w=1600&q=80',
  emg:'https://images.unsplash.com/photo-1534445867742-43195f401b6c?auto=format&fit=crop&w=1600&q=80',
  faq:'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?auto=format&fit=crop&w=1600&q=80',
  r1:'https://images.unsplash.com/photo-1552832230-c0197dd311b5?auto=format&fit=crop&w=1600&q=80',
  r2:'https://images.unsplash.com/photo-1525874684015-58379d421a52?auto=format&fit=crop&w=1600&q=80',
  vat:'https://images.unsplash.com/photo-1531572753322-ad063cecc140?auto=format&fit=crop&w=1600&q=80',
  tus:'https://images.unsplash.com/photo-1534445867742-43195f401b6c?auto=format&fit=crop&w=1600&q=80',
  wine:'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?auto=format&fit=crop&w=1600&q=80',
  f1:'https://images.unsplash.com/photo-1543429258-0f2e8e9b7ef2?auto=format&fit=crop&w=1600&q=80',
  f2:'https://images.unsplash.com/photo-1541370976299-4d24ebbc9077?auto=format&fit=crop&w=1600&q=80',
  cook:'https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&w=1600&q=80',
  pisa:'https://images.unsplash.com/photo-1564064746848-ae384ac2f69e?auto=format&fit=crop&w=1600&q=80',
  dep:'https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?auto=format&fit=crop&w=1600&q=80'
};
const G={
  ps:[
    {u:'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?auto=format&fit=crop&w=800&q=80',c:'Elegant Suite'},
    {u:'https://images.unsplash.com/photo-1590490360182-c33d57733427?auto=format&fit=crop&w=800&q=80',c:'Living Area'},
    {u:'https://images.unsplash.com/photo-1560448204-603b3fc33ddc?auto=format&fit=crop&w=800&q=80',c:'Bedroom'},
    {u:'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?auto=format&fit=crop&w=800&q=80',c:'Bathroom'},
    {u:'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?auto=format&fit=crop&w=800&q=80',c:'Historic Details'},
    {u:'https://images.unsplash.com/photo-1552832230-c0197dd311b5?auto=format&fit=crop&w=800&q=80',c:'Near Trevi'}
  ],
  pm:[
    {u:'https://images.unsplash.com/photo-1571896349842-33c89424de2d?auto=format&fit=crop&w=800&q=80',c:'Thermal Pool'},
    {u:'https://images.unsplash.com/photo-1540541338287-41700207dee6?auto=format&fit=crop&w=800&q=80',c:'Pool Gardens'},
    {u:'https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=800&q=80',c:'Hotel'},
    {u:'https://images.unsplash.com/photo-1590490360182-c33d57733427?auto=format&fit=crop&w=800&q=80',c:'Guest Room'},
    {u:'https://images.unsplash.com/photo-1523539693385-e5e891eb4465?auto=format&fit=crop&w=800&q=80',c:'Val d\'Orcia'},
    {u:'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=800&q=80',c:'Spa'}
  ],
  gb:[
    {u:'https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=800&q=80',c:'Lobby'},
    {u:'https://images.unsplash.com/photo-1582719508461-905c673771fd?auto=format&fit=crop&w=800&q=80',c:'Deluxe Room'},
    {u:'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?auto=format&fit=crop&w=800&q=80',c:'Classic'},
    {u:'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?auto=format&fit=crop&w=800&q=80',c:'B-Roof'},
    {u:'https://images.unsplash.com/photo-1543429258-0f2e8e9b7ef2?auto=format&fit=crop&w=800&q=80',c:'Florence'},
    {u:'https://images.unsplash.com/photo-1578683010236-d716f9a3f461?auto=format&fit=crop&w=800&q=80',c:'Terrace'}
  ],
  golf:[
    {u:'https://images.unsplash.com/photo-1529260830199-42c24126f198?auto=format&fit=crop&w=800&q=80',c:'Rome Streets'},
    {u:'https://images.unsplash.com/photo-1552832230-c0197dd311b5?auto=format&fit=crop&w=800&q=80',c:'Iconic Sites'},
    {u:'https://images.unsplash.com/photo-1569154956968-3f901cc65c0c?auto=format&fit=crop&w=800&q=80',c:'Hidden Corners'}
  ],
  vat:[
    {u:'https://images.unsplash.com/photo-1531572753322-ad063cecc140?auto=format&fit=crop&w=800&q=80',c:'Vatican Museums'},
    {u:'https://images.unsplash.com/photo-1548585744-4b86d91e6fa1?auto=format&fit=crop&w=800&q=80',c:'Sistine Chapel'},
    {u:'https://images.unsplash.com/photo-1558005137-d9619a5c539f?auto=format&fit=crop&w=800&q=80',c:'St. Peter\'s'}
  ],
  wine:[
    {u:'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?auto=format&fit=crop&w=800&q=80',c:'Wine Tasting'},
    {u:'https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?auto=format&fit=crop&w=800&q=80',c:'Vineyard'},
    {u:'https://images.unsplash.com/photo-1566995541428-f2246c17cda1?auto=format&fit=crop&w=800&q=80',c:'Cellar Tour'}
  ],
  pienza:[
    {u:'https://images.unsplash.com/photo-1523539693385-e5e891eb4465?auto=format&fit=crop&w=800&q=80',c:'Tuscan Hills'},
    {u:'https://images.unsplash.com/photo-1467803738586-46b7eb7b16a1?auto=format&fit=crop&w=800&q=80',c:'Pienza Village'},
    {u:'https://images.unsplash.com/photo-1534445867742-43195f401b6c?auto=format&fit=crop&w=800&q=80',c:'Val d\'Orcia'}
  ],
  flor:[
    {u:'https://images.unsplash.com/photo-1543429258-0f2e8e9b7ef2?auto=format&fit=crop&w=800&q=80',c:'Florence'},
    {u:'https://images.unsplash.com/photo-1541370976299-4d24ebbc9077?auto=format&fit=crop&w=800&q=80',c:'City Views'},
    {u:'https://images.unsplash.com/photo-1504019347908-b45f9b0b8dd5?auto=format&fit=crop&w=800&q=80',c:'Accademia'}
  ],
  cook:[
    {u:'https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&w=800&q=80',c:'Cooking Class'},
    {u:'https://images.unsplash.com/photo-1551218808-94e220e084d2?auto=format&fit=crop&w=800&q=80',c:'Fresh Pasta'},
    {u:'https://images.unsplash.com/photo-1466637574441-749b8f19452f?auto=format&fit=crop&w=800&q=80',c:'Local Market'}
  ],
  lucca:[
    {u:'https://images.unsplash.com/photo-1539037116277-4db20889f2d4?auto=format&fit=crop&w=800&q=80',c:'Lucca Walls'},
    {u:'https://images.unsplash.com/photo-1498579150354-977475b7ea0b?auto=format&fit=crop&w=800&q=80',c:'Food Tour'},
    {u:'https://images.unsplash.com/photo-1515443961218-a51367888e4b?auto=format&fit=crop&w=800&q=80',c:'Local Cuisine'}
  ],
  pisa:[
    {u:'https://images.unsplash.com/photo-1564064746848-ae384ac2f69e?auto=format&fit=crop&w=800&q=80',c:'Leaning Tower'},
    {u:'https://images.unsplash.com/photo-1560717799-b975a222ba06?auto=format&fit=crop&w=800&q=80',c:'Piazza dei Miracoli'},
    {u:'https://images.unsplash.com/photo-1592482100144-c3fb64b84397?auto=format&fit=crop&w=800&q=80',c:'Cathedral'}
  ]
};
const Logo=({className="",inv=false})=>(
  <img 
    src="https://darwin.gr/wp-content/uploads/2022/10/LOGO_Auth_ITALY_green-1.png" 
    alt="Authenticus Italy" 
    className={className}
    style={inv ? {filter:'brightness(0) invert(1)'} : {}}
  />
);
const Ic={
  Menu:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M4 6h16M4 12h16M4 18h16"/></svg>,
  X:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M6 18L18 6M6 6l12 12"/></svg>,
  ChD:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M19 9l-7 7-7-7"/></svg>,
  ChR:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M9 5l7 7-7 7"/></svg>,
  ChL:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M15 19l-7-7 7-7"/></svg>,
  Ph:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>,
  Wa:({c})=><svg className={c} fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>,
  Mp:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>,
  Cl:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>,
  Ca:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M8 17h.01M16 17h.01M9 11h6M5 11l1.5-4.5A2 2 0 018.39 5h7.22a2 2 0 011.89 1.5L19 11M5 11v6a1 1 0 001 1h1a1 1 0 001-1v-1h8v1a1 1 0 001 1h1a1 1 0 001-1v-6M5 11h14"/></svg>,
  Pl:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg>,
  Bd:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>,
  Cm:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><path d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/></svg>,
  Ut:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>,
  Wi:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M9 3h6l1 7c0 2.5-2 4-4 4s-4-1.5-4-4l1-7zM12 14v7M8 21h8"/></svg>,
  Co:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M18 8h1a4 4 0 010 8h-1M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8zM6 1v3M10 1v3M14 1v3"/></svg>,
  Cp:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><circle cx="12" cy="12" r="9"/></svg>,
  Ft:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>,
  Cal:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>,
  Us:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>,
  Sh:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>,
  Dl:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>,
  Ed:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>,
  Ck:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M5 13l4 4L19 7"/></svg>,
  Fs:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/></svg>,
  Sn:({c})=><svg className={c} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>,
  Im:({c,s})=><svg className={c} style={s} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
};
const Gal=({imgs,name,isExp=false})=>{
  const ref=useRef(null);
  const[cL,setCL]=useState(false);
  const[cR,setCR]=useState(true);
  const chk=()=>{if(ref.current){const{scrollLeft:l,scrollWidth:w,clientWidth:c}=ref.current;setCL(l>0);setCR(l<w-c-10);}};
  const scr=(d)=>{if(ref.current){ref.current.scrollBy({left:d==='l'?-280:280,behavior:'smooth'});setTimeout(chk,300);}};
  useEffect(()=>{chk();},[]);
  return(
    <div className="mt-4">
      <div className="flex items-center justify-between mb-2">
        <h4 className="text-sm font-medium text-stone-600 flex items-center gap-2"><Ic.Im c="w-4 h-4" s={{color:B.dg}}/>{isExp?'Experience Gallery':'Property Gallery'}</h4>
        <div className="flex gap-1">
          <button onClick={()=>scr('l')} disabled={!cL} className={`p-1 rounded-full ${cL?'bg-stone-100 hover:bg-stone-200':'opacity-30'}`}><Ic.ChL c="w-4 h-4 text-stone-600"/></button>
          <button onClick={()=>scr('r')} disabled={!cR} className={`p-1 rounded-full ${cR?'bg-stone-100 hover:bg-stone-200':'opacity-30'}`}><Ic.ChR c="w-4 h-4 text-stone-600"/></button>
        </div>
      </div>
      <div ref={ref} onScroll={chk} className="flex gap-3 overflow-x-auto hide-scrollbar pb-2">
        {imgs.map((i,x)=>(
          <div key={x} className="flex-shrink-0 w-64 group cursor-pointer">
            <div className="relative h-40 rounded-lg overflow-hidden bg-stone-100">
              <img src={i.u} alt={i.c} className="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" loading="lazy"/>
              <div className="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"/>
              <span className="absolute bottom-2 left-2 text-white text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity">{i.c}</span>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};
const TripMap=({locs,onSelect,fullscreen=false,onToggleFs})=>{
  const mapRef=useRef(null);
  const mapInstance=useRef(null);
  const[selectedLoc,setSelectedLoc]=useState(null);
  useEffect(()=>{
    if(!mapRef.current)return;
    if(mapInstance.current){mapInstance.current.remove();mapInstance.current=null;}
    const map=L.map(mapRef.current,{scrollWheelZoom:fullscreen,zoomControl:fullscreen}).setView([42.5,11.8],6);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',{
      attribution:'¬©OpenStreetMap, ¬©CartoDB',maxZoom:19
    }).addTo(map);
    const mainLocs=locs.filter(l=>!l.dt);
    const dayTrips=locs.filter(l=>l.dt);
    if(mainLocs.length>1){
      const coords=mainLocs.map(l=>[l.lat,l.lng]);
      L.polyline(coords,{color:B.dg,weight:3,opacity:0.6,dashArray:'10,10'}).addTo(map);
    }
    locs.forEach((loc,i)=>{
      const mainIdx=mainLocs.indexOf(loc);
      const icon=L.divIcon({
        className:'custom-marker',
        html:`<div style="background:${loc.c};color:#fff;width:${loc.dt?'24px':'32px'};height:${loc.dt?'24px':'32px'};border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:${loc.dt?'10px':'12px'};box-shadow:0 2px 8px rgba(0,0,0,0.3);border:2px solid #fff;cursor:pointer;transition:transform 0.2s;">${loc.dt?'‚Ä¢':mainIdx+1}</div>`,
        iconSize:[loc.dt?24:32,loc.dt?24:32],iconAnchor:[loc.dt?12:16,loc.dt?12:16]
      });
      const marker=L.marker([loc.lat,loc.lng],{icon}).addTo(map);
      marker.bindPopup(`<div style="font-family:Source Sans 3,sans-serif;min-width:160px;"><b style="color:${B.dg};font-size:14px;">${loc.n}</b><br/><span style="color:#666;font-size:12px;">${loc.dt?'Day Trip':'Days '+loc.days}</span><br/><span style="font-size:11px;color:#888;">${loc.h}</span></div>`);
      marker.on('click',()=>{setSelectedLoc(loc);onSelect&&onSelect(loc.id);});
    });
    const bounds=L.latLngBounds(locs.map(l=>[l.lat,l.lng]));
    map.fitBounds(bounds.pad(0.15));
    mapInstance.current=map;
    setTimeout(()=>map.invalidateSize(),100);
    return()=>{if(mapInstance.current){mapInstance.current.remove();mapInstance.current=null;}};
  },[locs,fullscreen]);
  return(
    <div className={`relative ${fullscreen?'fixed inset-0 z-50 bg-white':''}`}>
      {fullscreen&&(
        <div className="absolute top-0 left-0 right-0 z-[1001] bg-white/95 backdrop-blur-sm border-b border-stone-200 px-4 py-3 flex items-center justify-between">
          <h3 className="font-serif text-xl italic" style={{color:B.dg}}>Your Journey Map</h3>
          <button onClick={onToggleFs} className="p-2 hover:bg-stone-100 rounded-full"><Ic.X c="w-6 h-6 text-stone-600"/></button>
        </div>
      )}
      <div ref={mapRef} className={`w-full rounded-xl overflow-hidden shadow-inner ${fullscreen?'h-full pt-14':'h-80 md:h-96'}`} style={{background:'#f5f5f4'}}/>
      {!fullscreen&&<button onClick={onToggleFs} className="absolute top-3 right-3 p-2 bg-white/90 hover:bg-white rounded-lg shadow-md z-[1000]" title="Fullscreen map"><Ic.Fs c="w-5 h-5 text-stone-600"/></button>}
      {fullscreen&&selectedLoc&&(
        <div className="absolute bottom-6 left-6 right-6 md:left-auto md:right-6 md:w-80 bg-white rounded-xl shadow-xl p-4 z-[1001]">
          <div className="flex items-start gap-3">
            <span className="w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold shrink-0" style={{background:selectedLoc.c}}>{selectedLoc.dt?'‚Ä¢':locs.filter(l=>!l.dt).indexOf(selectedLoc)+1}</span>
            <div className="flex-1">
              <h4 className="font-medium text-stone-800">{selectedLoc.n}</h4>
              <p className="text-sm text-stone-500">{selectedLoc.dt?'Day Trip':'Days '+selectedLoc.days}</p>
              <p className="text-sm mt-1" style={{color:B.dg}}>{selectedLoc.h}</p>
              {!selectedLoc.dt&&<a href={`https://maps.google.com/?q=${encodeURIComponent(selectedLoc.h+' '+selectedLoc.n+' Italy')}`} target="_blank" rel="noopener noreferrer" className="text-sm mt-2 inline-flex items-center gap-1 hover:underline" style={{color:B.g}}><Ic.Mp c="w-4 h-4"/>Open in Google Maps</a>}
            </div>
            <button onClick={()=>setSelectedLoc(null)} className="p-1 hover:bg-stone-100 rounded"><Ic.X c="w-4 h-4 text-stone-400"/></button>
          </div>
        </div>
      )}
      {!fullscreen&&(
        <div className="mt-4 flex flex-wrap gap-3 justify-center">
          {locs.filter(l=>!l.dt).map((loc,i)=>(
            <div key={loc.id} className="flex items-center gap-2 text-sm cursor-pointer hover:opacity-70" onClick={()=>onSelect&&onSelect(loc.id)}>
              <span className="w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-semibold" style={{background:loc.c}}>{i+1}</span>
              <span className="text-stone-600">{loc.n} <span className="text-stone-400">(Days {loc.days})</span></span>
            </div>
          ))}
        </div>
      )}
    </div>
  );
};
const exportPDF=(setLoading)=>{
  const el=document.getElementById('booklet-content');
  if(!el)return;
  setLoading&&setLoading(true);
  const opt={
    margin:[8,8,8,8],
    filename:`Chapman-Italy-Booklet-${new Date().toISOString().split('T')[0]}.pdf`,
    image:{type:'jpeg',quality:0.95},
    html2canvas:{scale:2,useCORS:true,logging:false,scrollY:0},
    jsPDF:{unit:'mm',format:'a4',orientation:'portrait'},
    pagebreak:{mode:['avoid-all','css','legacy']}
  };
  document.body.style.cursor='wait';
  html2pdf().set(opt).from(el).save().then(()=>{
    document.body.style.cursor='default';
    setLoading&&setLoading(false);
  }).catch(()=>{
    document.body.style.cursor='default';
    setLoading&&setLoading(false);
    alert('PDF generation failed. Please try again.');
  });
};
const WhatsAppPanel=({onClose,wa,name})=>{
  const quickMsgs=[
    {emoji:'üëã',label:'Say Hello',msg:`Hello! I am a guest on the ${name} Italy trip.`},
    {emoji:'üöó',label:'Transfer Help',msg:`Hello! I need assistance with my transfer arrangements.`},
    {emoji:'üçΩÔ∏è',label:'Restaurant',msg:`Hello! Could you recommend a restaurant for tonight?`},
    {emoji:'üé´',label:'Tickets/Tours',msg:`Hello! I have a question about my tour tickets.`},
    {emoji:'üÜò',label:'Urgent Help',msg:`Hello! I need urgent assistance please.`}
  ];
  return(
    <div className="fixed bottom-20 right-5 z-40 wa-panel">
      <div className="bg-white rounded-2xl shadow-2xl w-80 overflow-hidden border border-stone-200">
        <div className="p-4 text-white" style={{backgroundColor:'#075E54'}}>
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center"><Ic.Wa c="w-5 h-5"/></div>
              <div><p className="font-medium">Authenticus Concierge</p><p className="text-xs text-white/70">Typically replies instantly</p></div>
            </div>
            <button onClick={onClose} className="p-1 hover:bg-white/10 rounded-full"><Ic.X c="w-5 h-5"/></button>
          </div>
        </div>
        <div className="p-4 bg-stone-50">
          <div className="bg-white rounded-xl p-3 shadow-sm mb-3">
            <p className="text-sm text-stone-600">Hi! üëã How can we assist you today? Tap a quick message below or write your own.</p>
          </div>
          <div className="space-y-2">
            {quickMsgs.map((q,i)=>(
              <a key={i} href={`https://wa.me/${wa}?text=${encodeURIComponent(q.msg)}`} target="_blank" rel="noopener noreferrer" className="flex items-center gap-3 p-2.5 bg-white rounded-lg hover:bg-stone-100 transition-colors border border-stone-100">
                <span className="text-lg">{q.emoji}</span>
                <span className="text-sm text-stone-700">{q.label}</span>
                <Ic.ChR c="w-4 h-4 text-stone-400 ml-auto"/>
              </a>
            ))}
          </div>
          <a href={`https://wa.me/${wa}`} target="_blank" rel="noopener noreferrer" className="mt-3 w-full py-2.5 rounded-lg text-white text-sm font-medium flex items-center justify-center gap-2" style={{backgroundColor:'#25D366'}}>
            <Ic.Sn c="w-4 h-4"/>Open Chat
          </a>
        </div>
      </div>
    </div>
  );
};
const D={
  name:"Chapman Family",dest:"Italy",sub:"Prepared for You",dates:"March 13th - 22nd, 2025",
  em:{sp:"Lorenzo",ph:"+39 3393527400",wa:"+393393527400",ep:"+39 331 154 5758",em:"emergency@authenticusitaly.it"},
  weather:{
    1:{hi:16,lo:8,icon:'üå§Ô∏è',cond:'Partly Cloudy'},
    2:{hi:17,lo:9,icon:'‚òÄÔ∏è',cond:'Sunny'},
    3:{hi:15,lo:7,icon:'üå•Ô∏è',cond:'Mostly Cloudy'},
    4:{hi:14,lo:6,icon:'üåßÔ∏è',cond:'Light Rain'},
    5:{hi:16,lo:8,icon:'‚õÖ',cond:'Partly Cloudy'},
    6:{hi:18,lo:9,icon:'‚òÄÔ∏è',cond:'Sunny'},
    7:{hi:19,lo:10,icon:'‚òÄÔ∏è',cond:'Sunny'},
    8:{hi:17,lo:9,icon:'üå§Ô∏è',cond:'Partly Cloudy'},
    9:{hi:16,lo:8,icon:'‚õÖ',cond:'Partly Cloudy'},
    10:{hi:15,lo:7,icon:'üå•Ô∏è',cond:'Overcast'}
  },
  faq:[
    {cat:'Currency & Payments',icon:'üí∂',items:[
      {q:'What is the local currency?',a:'Italy uses the Euro (‚Ç¨). As of March 2025, ‚Ç¨1 ‚âà $1.08 USD.'},
      {q:'Are credit cards widely accepted?',a:'Yes, Visa and Mastercard are accepted almost everywhere. American Express is less common. Always carry some cash for small purchases, markets, and tips.'},
      {q:'Where can I exchange money?',a:'Banks offer the best rates. Avoid airport and hotel exchanges. ATMs (Bancomat) are widely available and offer competitive rates‚Äîjust notify your bank before traveling.'}
    ]},
    {cat:'Cultural Etiquette',icon:'üáÆüáπ',items:[
      {q:'What is the tipping culture?',a:'Tipping is appreciated but not obligatory. Round up at caf√©s, leave 5-10% at restaurants if service was excellent. Some places include "coperto" (cover charge) which is not a tip.'},
      {q:'Are there dress codes to know about?',a:'Churches require covered shoulders and knees‚Äîno shorts or tank tops. Bring a scarf or light cardigan for the Vatican and other religious sites. Smart casual is appropriate for upscale restaurants.'},
      {q:'What are typical meal times?',a:'Lunch is 12:30-2:30 PM, dinner starts around 7:30-8:00 PM. Many restaurants close between lunch and dinner (3-7 PM). Italians rarely eat dinner before 7:30 PM.'}
    ]},
    {cat:'Power & Connectivity',icon:'üîå',items:[
      {q:'What type of power adapter do I need?',a:'Italy uses Type L (3-pin) and Type C (2-pin Europlug) outlets at 230V/50Hz. US devices require an adapter; high-wattage items may need a voltage converter.'},
      {q:'Will my phone work in Italy?',a:'Most US phones work in Italy with international roaming. Consider purchasing a local SIM card or an international data plan. Free WiFi is available at hotels and many caf√©s.'}
    ]},
    {cat:'Health & Safety',icon:'üè•',items:[
      {q:'Is tap water safe to drink?',a:'Yes! Italian tap water is safe and high quality. Rome\'s public fountains (nasoni) provide fresh, drinkable water throughout the city.'},
      {q:'Do I need any vaccinations?',a:'No special vaccinations are required for Italy. Ensure routine vaccinations are up to date. Bring any prescription medications in original containers.'},
      {q:'What about travel insurance?',a:'We strongly recommend comprehensive travel insurance covering medical emergencies, trip cancellation, and lost luggage. The European emergency number is 112.'}
    ]}
  ],
  locs:[
    {id:'rome',n:'Rome',lat:41.9009,lng:12.4833,days:'1-3',h:'Palazzo Scanderbeg',c:'#E74C3C'},
    {id:'bagno',n:'Bagno Vignoni',lat:43.0283,lng:11.6219,days:'4-5',h:'Hotel Posta Marcucci',c:'#9B59B6'},
    {id:'florence',n:'Florence',lat:43.7696,lng:11.2558,days:'6-9',h:'Grand Hotel Baglioni',c:'#3498DB'},
    {id:'pisa',n:'Pisa',lat:43.7228,lng:10.4017,days:'9',h:'Day Trip',c:'#1ABC9C',dt:true},
    {id:'lucca',n:'Lucca',lat:43.8429,lng:10.5027,days:'9',h:'Day Trip',c:'#1ABC9C',dt:true}
  ],
  acc:[
    {d:"Day 1-3",n:"Palazzo Scanderbeg",l:"Rome",dt:"Luxury Apartment",ni:3,g:'ps',ds:"Built in 1466 by Albanian hero George Castriota (Scanderbeg), this 15th-century palazzo sits steps from the Trevi Fountain in a quiet piazza. The residence features elegant apartment-style suites with modern amenities, spacious living areas, and some units offering private terraces, hammam-style showers, and butler service. A true 'home away from home' in the heart of the Eternal City."},
    {d:"Day 4-5",n:"Hotel Posta Marcucci",l:"Bagno Vignoni",dt:"Thermal Spa Hotel",ni:2,g:'pm',ds:"Nestled in the Val d'Orcia UNESCO World Heritage Site, La Posta Hotel & Thermal Spa offers an oasis of wellness with thermal waters rising at 49¬∞C. Three outdoor pools at varying temperatures (28-38¬∞C) are set in lush gardens with breathtaking views of Rocca d'Orcia. The property features a full spa with Finnish sauna, Turkish bath, and salt room."},
    {d:"Day 6-9",n:"Grand Hotel Baglioni",l:"Florence",dt:"Historic Hotel",ni:4,g:'gb',ds:"Established in 1903 in a majestic 19th-century building that was once the residence of the Carrega Bertolini Princes, this elegant hotel offers 192 rooms furnished in classic Florentine style with parquet floors and wooden beam ceilings. The crown jewel is B-Roof, a panoramic rooftop restaurant offering 360-degree views of Florence's skyline including Brunelleschi's Dome and Giotto's Bell Tower."}
  ],
  itin:[
    {dy:1,dt:"Thu, Mar 13",loc:"Rome",hk:'r1',act:[
      {t:"info",i:"info",ti:"Welcome!",ds:"Download WhatsApp to stay connected in Italy!",nt:true},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Palazzo Scanderbeg",ad:"Vicolo Scanderbeg, 117, Roma",g:'ps'}
    ]},
    {dy:2,dt:"Fri, Mar 14",loc:"Rome",hk:'r2',act:[
      {t:"info",i:"info",ti:"Tourist Tax",ds:"Required each night, payable in cash at check-out.",nt:true},
      {t:"tr",i:"car",ti:"Airport Pick-up",tm:"11:20 AM",ds:"Driver at arrivals with name sign.",pr:"Driver4u",ct:"+39 320 4568691",mp:"Rome Airport"},
      {t:"act",i:"camera",ti:"Golf Cart Tour",tm:"3:30 PM",dur:"3 hrs",pr:"Rolling Rome",ct:"+39 320 807 6437",mp:"Hotel lobby",eds:"Explore Rome's enchanting streets and hidden piazzas aboard a vintage-style golf cart. Your expert local guide will navigate narrow cobblestone alleys inaccessible to larger vehicles, revealing secret fountains, historic landmarks, and the best gelato spots along the way.",g:'golf'},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Palazzo Scanderbeg",ad:"Vicolo Scanderbeg, 117, Roma",g:'ps'}
    ]},
    {dy:3,dt:"Sat, Mar 15",loc:"Rome",hk:'vat',act:[
      {t:"tr",i:"car",ti:"Transfer to Vatican",tm:"6:50 AM",pr:"Driver4u",ct:"+39 3331413474 (Mark)"},
      {t:"act",i:"compass",ti:"Vatican Tour",tm:"7:45 AM",dur:"4 hrs",ds:"Early entrance. Be there 15 min prior.",pr:"Walks",ct:"+39 068 5960143",mp:"Antico Caf√© Candia",nt2:"Shoulders/legs covered. ID required.",tk:true,eds:"Experience the Vatican's masterpieces before the crowds arrive with exclusive early-morning access. Your expert guide will lead you through the Vatican Museums' breathtaking galleries, the awe-inspiring Sistine Chapel with Michelangelo's iconic ceiling, and majestic St. Peter's Basilica.",g:'vat'},
      {t:"tr",i:"car",ti:"Return Transfer",pr:"Driver4u",ct:"+39 320 4568691"},
      {t:"lei",i:"coffee",ti:"Afternoon at Leisure"},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Palazzo Scanderbeg",ad:"Vicolo Scanderbeg, 117, Roma",g:'ps'}
    ]},
    {dy:4,dt:"Sun, Mar 16",loc:"Tuscany",hk:'tus',act:[
      {t:"tr",i:"car",ti:"Transfer to Tuscany",tm:"10:00 AM",ds:"Room ready from 3 PM. Thermal baths available.",pr:"Driver4u",ct:"+39 320 4568691"},
      {t:"lei",i:"coffee",ti:"Afternoon at Leisure",ds:"Enjoy thermal baths and spa."},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Hotel Posta Marcucci",ad:"Via Ara Urcea, 43, Bagno Vignoni",g:'pm'}
    ]},
    {dy:5,dt:"Mon, Mar 17",loc:"Tuscany",hk:'wine',act:[
      {t:"tr",i:"car",ti:"Pick-up for Wine Tour",tm:"10:15 AM",pr:"Sartini Tours",ct:"+39 3452499896 (Emil)"},
      {t:"act",i:"wine",ti:"Wine Tour & Tasting",tm:"11:00 AM",dur:"2.5 hrs",loc:"Tenuta CastelGiocondo",ct:"+39 348 730 3767 (Teresa)",eds:"Discover the art of Tuscan winemaking at this prestigious estate in the heart of Brunello country. Tour the historic cellars, learn about traditional production methods, and savor a guided tasting of award-winning wines paired with local delicacies.",g:'wine'},
      {t:"act",i:"compass",ti:"Pienza & Bagno Vignoni",tm:"2:45 PM",dur:"2.5 hrs",pr:"Sara",ct:"+39 340 6739044",eds:"Wander through the Renaissance 'ideal city' of Pienza, a UNESCO gem created by Pope Pius II. Sample the famous Pecorino cheese, explore artisan shops, then return to Bagno Vignoni to admire its unique central thermal pool that has attracted visitors since Roman times.",g:'pienza'},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Hotel Posta Marcucci",ad:"Via Ara Urcea, 43, Bagno Vignoni",g:'pm'}
    ]},
    {dy:6,dt:"Tue, Mar 18",loc:"Florence",hk:'f1',act:[
      {t:"tr",i:"car",ti:"Transfer to Florence",tm:"10:30 AM",ds:"Room ready from 2 PM.",pr:"Sartini Tours",ct:"+39 3452499896 (Emil)"},
      {t:"lei",i:"coffee",ti:"Afternoon at Leisure"},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Grand Hotel Baglioni",ad:"Piazza dell'Unit√† Italiana, 6, Firenze",g:'gb'}
    ]},
    {dy:7,dt:"Wed, Mar 19",loc:"Florence",hk:'f2',act:[
      {t:"act",i:"compass",ti:"Florence & Accademia",tm:"10:00 AM",dur:"3 hrs",ds:"Walking tour + Michelangelo's David.",pr:"Paola",ct:"+39 3339414823",mp:"Guide at hotel",tk:true,eds:"Immerse yourself in the birthplace of the Renaissance with an expert art historian guide. Stroll through historic piazzas, admire architectural marvels, and enjoy skip-the-line access to the Accademia Gallery to stand before Michelangelo's magnificent David.",g:'flor'},
      {t:"lei",i:"coffee",ti:"Afternoon at Leisure"},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Grand Hotel Baglioni",ad:"Piazza dell'Unit√† Italiana, 6, Firenze",g:'gb'}
    ]},
    {dy:8,dt:"Thu, Mar 20",loc:"Florence",hk:'cook',act:[
      {t:"act",i:"utensils",ti:"Cooking Class",tm:"8:30 AM",dur:"4 hrs",ds:"Market tour + pasta making + meal.",pr:"Chef Vary",ct:"+39 3388587431 (Roberto)",mp:"Zaza Restaurant",eds:"Begin your culinary adventure at Florence's vibrant Sant'Ambrogio market, selecting the freshest ingredients alongside your chef. Return to the kitchen to master the art of handmade pasta and traditional Tuscan recipes, then sit down to enjoy your creations with local wine.",g:'cook'},
      {t:"lei",i:"coffee",ti:"Afternoon at Leisure"},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Grand Hotel Baglioni",ad:"Piazza dell'Unit√† Italiana, 6, Firenze",g:'gb'}
    ]},
    {dy:9,dt:"Fri, Mar 21",loc:"Florence",hk:'pisa',act:[
      {t:"tr",i:"car",ti:"Transfer to Lucca",tm:"9:30 AM",pr:"Mr Limousine",ct:"+39 339 313 3899"},
      {t:"act",i:"utensils",ti:"Lucca Food Tour",tm:"11:00 AM",dur:"2.5 hrs",pr:"Tuscany Like a Local",ct:"+39 340 4641267",mp:"Piazzale Ricasoli",eds:"Discover Lucca's gastronomic treasures on this walking food tour through the charming walled city. Sample local specialties including traditional buccellato cake, artisan salumi, fresh focaccia, and regional wines while learning about centuries-old culinary traditions.",g:'lucca'},
      {t:"act",i:"camera",ti:"Visit Pisa",tm:"2:30 PM",ds:"Self-guided. Leaning Tower photos!",eds:"Explore the famous Piazza dei Miracoli at your own pace, home to the iconic Leaning Tower, the stunning Cathedral, and the Baptistery. Capture the perfect photo with the tower and wander through this UNESCO World Heritage Site.",g:'pisa'},
      {t:"acc",i:"hotel",ti:"Accommodation",loc:"Grand Hotel Baglioni",ad:"Piazza dell'Unit√† Italiana, 6, Firenze",g:'gb'}
    ]},
    {dy:10,dt:"Sat, Mar 22",loc:"Departure",hk:'dep',act:[
      {t:"tr",i:"plane",ti:"Transfer to Airport",tm:"4:30 AM",pr:"Mr Limousine",ct:"+39 339 313 3899"},
      {t:"info",i:"info",ti:"Arrivederci!",ds:"We wish you a safe flight home!",nt:true}
    ]}
  ]
};
const getIc=(t,c,s)=>{
  const m={car:Ic.Ca,plane:Ic.Pl,hotel:Ic.Bd,camera:Ic.Cm,utensils:Ic.Ut,wine:Ic.Wi,coffee:Ic.Co,compass:Ic.Cp,info:Ic.Ft};
  const I=m[t]||Ic.Cal;
  return <I c={`w-5 h-5 ${c}`} s={s}/>;
};
function App(){
  const[menu,setMenu]=useState(false);
  const[sec,setSec]=useState('cover');
  const[exp,setExp]=useState({});
  const[edit,setEdit]=useState(false);
  const[notes,setNotes]=useState({});
  const[tab,setTab]=useState('ov');
  const[hero,setHero]=useState(H.cover);
  const[pdfLoading,setPdfLoading]=useState(false);
  const[showWaPanel,setShowWaPanel]=useState(false);
  const[fullscreenMap,setFullscreenMap]=useState(false);
  const[tempUnit,setTempUnit]=useState('F');
  const[faqOpen,setFaqOpen]=useState({});
  const refs=useRef({});
  const toF=(c)=>Math.round(c*9/5+32);
  const getTemp=(c)=>tempUnit==='F'?toF(c):c;
  const toc=[{id:'cover',l:'Cover'},{id:'brief',l:'Travel Brief'},{id:'map',l:'Journey'},{id:'ess',l:'Essentials'},...D.itin.map(d=>({id:`d${d.dy}`,l:`Day ${d.dy}`,s:d.loc})),{id:'emg',l:'Emergency'},{id:'faq',l:'FAQ'}];
  const goTo=(id)=>{setMenu(false);setSec(id);updH(id);refs.current[id]?.scrollIntoView({behavior:'smooth'});};
  const updH=(id)=>{
    if(id==='cover')setHero(H.cover);
    else if(id==='brief')setHero(H.brief);
    else if(id==='map')setHero(H.map);
    else if(id==='ess')setHero(H.ess);
    else if(id==='emg')setHero(H.emg);
    else if(id==='faq')setHero(H.faq);
    else{const d=D.itin.find(x=>`d${x.dy}`===id);if(d?.hk)setHero(H[d.hk]);}
  };
  const tog=(di,ai)=>setExp(p=>({...p,[`${di}-${ai}`]:!p[`${di}-${ai}`]}));
  const togFaq=(cat,idx)=>setFaqOpen(p=>({...p,[`${cat}-${idx}`]:!p[`${cat}-${idx}`]}));
  useEffect(()=>{
    const obs=new IntersectionObserver((e)=>{e.forEach(x=>{if(x.isIntersecting){const id=x.target.getAttribute('data-s');if(id){setSec(id);updH(id);}}});},{threshold:0.3});
    Object.entries(refs.current).forEach(([id,el])=>{if(el){el.setAttribute('data-s',id);obs.observe(el);}});
    return()=>obs.disconnect();
  },[]);
  return(
    <div className="min-h-screen bg-stone-50">
      <header className="fixed top-0 right-0 left-0 lg:left-1/2 z-50 bg-stone-50/95 backdrop-blur-sm border-b border-stone-200">
        <div className="flex items-center justify-between px-4 py-3">
          <button onClick={()=>setMenu(!menu)} className="p-2 hover:bg-stone-100 rounded-full">{menu?<Ic.X c="w-6 h-6 text-stone-700"/>:<Ic.Menu c="w-6 h-6 text-stone-700"/>}</button>
          <Logo className="h-12 w-auto"/>
          <div className="flex items-center gap-1">
            <button onClick={()=>setEdit(!edit)} className={`p-2 rounded-full ${edit?'bg-amber-100':''}`} style={edit?{color:B.g}:{color:'#57534e'}}><Ic.Ed c="w-5 h-5"/></button>
            <button className="p-2 hover:bg-stone-100 rounded-full"><Ic.Sh c="w-5 h-5 text-stone-600"/></button>
            <button onClick={()=>exportPDF(setPdfLoading)} disabled={pdfLoading} className={`p-2 hover:bg-stone-100 rounded-full ${pdfLoading?'opacity-50':''}`} title="Download PDF">
              {pdfLoading?<svg className="w-5 h-5 animate-spin text-stone-600" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"/><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"/></svg>:<Ic.Dl c="w-5 h-5 text-stone-600"/>}
            </button>
            <button onClick={()=>setShowWaPanel(!showWaPanel)} className="p-2 hover:bg-stone-100 rounded-full text-green-600" title="WhatsApp Concierge"><Ic.Wa c="w-5 h-5"/></button>
          </div>
        </div>
        {edit&&<div className="bg-amber-50 border-t border-amber-200 px-4 py-2 flex items-center justify-between"><span className="text-sm text-amber-800"><b>Edit Mode</b> ‚Äî Level III notes only</span><button onClick={()=>setEdit(false)} className="text-sm font-medium flex items-center gap-1" style={{color:B.g}}><Ic.Ck c="w-4 h-4"/>Save</button></div>}
      </header>
      <div className={`fixed inset-0 z-40 transition-all ${menu?'visible':'invisible'}`}>
        <div className={`absolute inset-0 bg-black/30 transition-opacity ${menu?'opacity-100':'opacity-0'}`} onClick={()=>setMenu(false)}/>
        <div className={`absolute top-0 left-0 lg:left-1/2 bottom-0 w-80 text-stone-100 transform transition-transform ${menu?'translate-x-0':'-translate-x-full'}`} style={{backgroundColor:B.dg}}>
          <div className="p-6 pt-20 h-full overflow-y-auto">
            <h2 className="text-lg font-light mb-6">Table of Contents</h2>
            <nav className="space-y-1">{toc.map(t=>(
              <button key={t.id} onClick={()=>goTo(t.id)} className={`w-full text-left py-2 px-3 rounded-lg flex items-center gap-3 ${sec===t.id?'bg-white/10 text-white':'text-stone-300 hover:bg-white/5'}`}>
                <span className="w-1.5 h-1.5 rounded-full" style={{backgroundColor:sec===t.id?B.g:'#78716c'}}/>
                <div><span className="text-sm">{t.l}</span>{t.s&&<span className="text-xs text-stone-400 ml-2">{t.s}</span>}</div>
              </button>
            ))}</nav>
          </div>
        </div>
      </div>
      <div className="flex min-h-screen">
        <div className="hidden lg:block lg:w-1/2 fixed left-0 top-0 bottom-0 no-print">
          <div className="w-full h-full bg-cover bg-center transition-all duration-700" style={{backgroundImage:`url(${hero})`}}><div className="absolute inset-0 bg-gradient-to-r from-black/20 to-transparent"/></div>
        </div>
        <div id="booklet-content" className="w-full lg:w-1/2 lg:ml-[50%]">
          <section ref={el=>refs.current['cover']=el} className="min-h-screen flex flex-col items-center justify-center px-6 py-24 relative" style={{backgroundColor:B.cr}}>
            <div className="lg:hidden absolute inset-0 bg-cover bg-center opacity-20" style={{backgroundImage:`url(${H.cover})`}}/>
            <div className="relative z-10 text-center max-w-md">
              <Logo className="h-28 w-auto mx-auto mb-6"/>
              <h1 className="font-serif text-4xl md:text-5xl mb-3 italic" style={{color:B.dg}}>{D.name}</h1>
              <div className="w-16 h-px mx-auto mb-4" style={{backgroundColor:B.g}}/>
              <p style={{color:B.dg}}>{D.sub}</p>
              <p className="text-sm tracking-widest uppercase mt-1" style={{color:B.g}}>{D.dates}</p>
              <p className="font-medium mt-3 text-lg" style={{color:B.dg}}>{D.dest}</p>
            </div>
            <div className="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce"><Ic.ChD c="w-6 h-6" s={{color:B.g}}/></div>
          </section>
          <section ref={el=>refs.current['brief']=el} className="min-h-screen px-6 py-20 bg-white">
            <h2 className="font-serif text-3xl text-center mb-10 italic" style={{color:B.dg}}>Travel Brief</h2>
            <div className="flex justify-center gap-6 mb-8 border-b border-stone-200">
              {[{id:'ov',l:'Overview',I:Ic.Cal},{id:'ac',l:'Accommodation',I:Ic.Bd}].map(t=>(
                <button key={t.id} onClick={()=>setTab(t.id)} className={`flex items-center gap-2 pb-3 px-3 border-b-2 ${tab===t.id?'text-stone-800':'border-transparent text-stone-400'}`} style={tab===t.id?{borderColor:B.g}:{}}>
                  <t.I c="w-4 h-4"/><span className="text-sm">{t.l}</span>
                </button>
              ))}
            </div>
            {tab==='ov'&&(
              <div className="max-w-3xl mx-auto overflow-x-auto">
                <table className="w-full text-sm">
                  <thead><tr className="border-b border-stone-200">
                    <th className="py-3 text-left text-stone-500 font-normal">Day</th>
                    <th className="py-3 text-left text-stone-500 font-normal">Activities</th>
                    <th className="py-3 text-center text-stone-500 font-normal w-28">
                      <div className="flex items-center justify-center gap-2">
                        <span>Weather</span>
                        <div className="inline-flex rounded-full border border-stone-300 overflow-hidden text-xs">
                          <button onClick={()=>setTempUnit('F')} className={`px-2 py-0.5 transition-colors ${tempUnit==='F'?'text-white':'text-stone-500 hover:bg-stone-100'}`} style={tempUnit==='F'?{backgroundColor:B.dg}:{}}>¬∞F</button>
                          <button onClick={()=>setTempUnit('C')} className={`px-2 py-0.5 transition-colors ${tempUnit==='C'?'text-white':'text-stone-500 hover:bg-stone-100'}`} style={tempUnit==='C'?{backgroundColor:B.dg}:{}}>¬∞C</button>
                        </div>
                      </div>
                    </th>
                  </tr></thead>
                  <tbody>{D.itin.map((d,i)=>{
                    const w=D.weather[d.dy];
                    return(
                    <tr key={i} className="border-b border-stone-100">
                      <td className="py-3 pr-4 align-top whitespace-nowrap"><span className="text-stone-800">Day {d.dy}</span><br/><span className="text-xs text-stone-400">{d.loc}</span></td>
                      <td className="py-3"><div className="space-y-1.5">
                        {d.act.filter(a=>!['acc','lei','info'].includes(a.t)).slice(0,2).map((a,j)=>(
                          <div key={j} className="flex items-start gap-2">{getIc(a.i,'mt-0.5',{color:B.dg})}<span className="text-stone-700">{a.ti}</span></div>
                        ))}
                        {d.act.find(a=>a.t==='acc')&&<div className="flex items-start gap-2"><Ic.Bd c="w-5 h-5 mt-0.5" s={{color:B.dg}}/><span className="text-stone-700">{d.act.find(a=>a.t==='acc')?.loc}</span></div>}
                      </div></td>
                      <td className="py-3 text-center align-top">
                        <div className="inline-flex flex-col items-center">
                          <span className="text-2xl">{w?.icon}</span>
                          <span className="text-xs text-stone-600 font-medium">{getTemp(w?.hi)}¬∞ / {getTemp(w?.lo)}¬∞</span>
                          <span className="text-xs text-stone-400">{w?.cond}</span>
                        </div>
                      </td>
                    </tr>
                  );})}</tbody>
                </table>
                <p className="text-xs text-stone-400 text-center mt-4 italic">Weather forecast is approximate and will be updated closer to your travel date.</p>
              </div>
            )}
            {tab==='ac'&&(
              <div className="max-w-3xl mx-auto space-y-6">{D.acc.map((a,i)=>(
                <div key={i} className="bg-stone-50 rounded-xl p-5 border border-stone-200">
                  <div className="flex flex-wrap items-start justify-between gap-4 mb-3">
                    <div><h3 className="font-medium text-stone-800">{a.n}</h3><p className="text-sm" style={{color:B.g}}>{a.l}</p></div>
                    <div className="text-right"><span className="text-sm text-stone-600">{a.d}</span><span className="block text-xs text-stone-400">{a.ni} nights</span></div>
                  </div>
                  <p className="text-sm text-stone-600 mb-3">{a.ds}</p>
                  {a.g&&<Gal imgs={G[a.g]} name={a.n}/>}
                </div>
              ))}</div>
            )}
          </section>
          <section ref={el=>refs.current['map']=el} className="min-h-screen px-6 py-20 bg-stone-50">
            <h2 className="font-serif text-3xl text-center mb-3 italic" style={{color:B.dg}}>Your Journey</h2>
            <p className="text-center text-stone-500 mb-8">Rome ‚Üí Tuscany ‚Üí Florence</p>
            <div className="max-w-3xl mx-auto">
              <TripMap locs={D.locs} fullscreen={fullscreenMap} onToggleFs={()=>setFullscreenMap(!fullscreenMap)} onSelect={(id)=>{const loc=D.locs.find(l=>l.id===id);if(loc&&!loc.dt&&!fullscreenMap){const dayNum=parseInt(loc.days.split('-')[0]);goTo(`d${dayNum}`);}}}/>
              {!fullscreenMap&&(
              <div className="mt-8 bg-white rounded-xl p-5 shadow-sm">
                <h3 className="text-sm font-medium text-stone-700 mb-4">Accommodations</h3>
                <div className="space-y-3">
                  {D.acc.map((a,i)=>(
                    <div key={i} className="flex items-start gap-3 p-3 rounded-lg hover:bg-stone-50 transition-colors">
                      <span className="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold shrink-0" style={{background:D.locs[i]?.c||B.g}}>{i+1}</span>
                      <div className="flex-1 min-w-0">
                        <h4 className="font-medium text-stone-800 text-sm">{a.n}</h4>
                        <p className="text-stone-500 text-xs">{a.d} ‚Ä¢ {a.l}</p>
                        <p className="text-stone-400 text-xs mt-0.5">{a.dt}</p>
                      </div>
                      <a href={`https://maps.google.com/?q=${encodeURIComponent(a.n+' '+a.l+' Italy')}`} target="_blank" rel="noopener noreferrer" className="p-2 rounded-full hover:bg-stone-100" style={{color:B.dg}}><Ic.Mp c="w-4 h-4"/></a>
                    </div>
                  ))}
                </div>
              </div>
              )}
            </div>
          </section>
          <section ref={el=>refs.current['ess']=el} className="min-h-screen px-6 py-20 bg-white">
            <h2 className="font-serif text-3xl text-center mb-10 italic" style={{color:B.dg}}>Travel Essentials</h2>
            <div className="max-w-2xl mx-auto space-y-4">
              {[{I:Ic.Ph,ti:'Stay Connected',tx:'Download WhatsApp for Italy.',hi:true},{I:Ic.Ft,ti:'Tourist Tax',tx:'Required each night, cash at check-out.',hi:false},{I:Ic.Us,ti:'Vatican Dress Code',tx:'Shoulders and legs covered. ID required.',hi:false}].map((it,i)=>(
                <div key={i} className="rounded-xl p-5 border" style={{backgroundColor:it.hi?'#FFFBEB':'#fafaf9',borderColor:it.hi?B.g:'#e7e5e4'}}>
                  <h3 className="font-medium text-stone-800 mb-2 flex items-center gap-2"><it.I c="w-5 h-5" s={{color:it.hi?B.g:B.dg}}/>{it.ti}</h3>
                  <p className="text-stone-600 text-sm">{it.tx}</p>
                </div>
              ))}
            </div>
          </section>
          {D.itin.map((day,di)=>(
            <section key={day.dy} ref={el=>refs.current[`d${day.dy}`]=el} className={`min-h-screen px-6 py-20 ${di%2===0?'bg-white':'bg-stone-50'}`}>
              <div className="lg:hidden -mx-6 -mt-20 mb-6 h-48 bg-cover bg-center relative" style={{backgroundImage:`url(${H[day.hk]})`}}><div className="absolute inset-0 bg-gradient-to-t from-white via-transparent to-transparent"/></div>
              <div className="max-w-2xl mx-auto">
                <div className="text-center mb-10">
                  <p className="text-xs text-stone-400 tracking-widest uppercase mb-1">{day.dt}</p>
                  <h2 className="font-serif text-3xl italic" style={{color:B.dg}}>Day {day.dy}</h2>
                  <p className="mt-1" style={{color:B.dg}}>{day.loc}</p>
                </div>
                <div className="space-y-4">{day.act.map((a,ai)=>{
                  const isExp=exp[`${di}-${ai}`];
                  const nk=`${di}-${ai}`;
                  const isExperience=a.t==='act';
                  const accInfo=a.t==='acc'&&a.g?D.acc.find(x=>x.g===a.g):null;
                  return(
                    <div key={ai} className={`rounded-xl border transition-all ${isExperience?'bg-gradient-to-br from-white to-stone-50 shadow-sm':a.nt?'bg-amber-50':'bg-white'}`} style={isExperience?{borderColor:B.dg,borderWidth:'1.5px'}:a.nt?{borderColor:B.g}:{borderColor:'#e7e5e4'}}>
                      <div className={`p-4 ${a.t!=='info'?'cursor-pointer':''}`} onClick={()=>a.t!=='info'&&tog(di,ai)}>
                        <div className="flex items-start gap-3">
                          <div className={`p-2 rounded-lg ${isExperience?'':'shrink-0'}`} style={{backgroundColor:isExperience?B.dg:a.nt?'#FEF3C7':'#f5f5f4'}}>{getIc(a.i,isExperience?'text-white':'',{color:isExperience?'#fff':a.nt?B.g:B.dg})}</div>
                          <div className="flex-1 min-w-0">
                            <div className="flex items-start justify-between gap-2">
                              <div>
                                {isExperience&&<span className="inline-block text-xs font-medium tracking-wide uppercase px-2 py-0.5 rounded mb-1.5" style={{backgroundColor:B.g,color:'#fff'}}>Experience</span>}
                                <h3 className={`font-medium text-stone-800 ${isExperience?'text-base':'text-sm'}`}>{a.ti}</h3>
                                {a.tm&&<p className={`${isExperience?'text-sm font-medium':'text-sm'} mt-0.5`} style={{color:B.dg}}>{a.tm}</p>}
                                {a.loc&&<p className="text-sm text-stone-500 mt-0.5">{a.loc}</p>}
                              </div>
                              {a.t!=='info'&&<Ic.ChR c={`w-5 h-5 text-stone-400 transition-transform ${isExp?'rotate-90':''}`}/>}
                            </div>
                            {a.nt&&<p className="text-sm mt-2 italic" style={{color:'#92700C'}}>{a.ds}</p>}
                            {a.t==='acc'&&a.ad&&<a href={`https://maps.google.com/search/${encodeURIComponent(a.ad)}`} target="_blank" rel="noopener noreferrer" className="text-sm mt-1 flex items-center gap-1 hover:opacity-70" style={{color:B.dg}}><Ic.Mp c="w-4 h-4" s={{color:B.dg}}/><span className="truncate">{a.ad}</span></a>}
                          </div>
                        </div>
                      </div>
                      {isExp&&a.t!=='info'&&(
                        <div className="px-4 pb-4 border-t border-stone-100 pt-3">
                          <div className="ml-11 space-y-3 text-sm">
                            {isExperience&&a.eds&&<p className="text-stone-600 leading-relaxed">{a.eds}</p>}
                            {!isExperience&&a.ds&&<p className="text-stone-600">{a.ds}</p>}
                            {a.dur&&<div className="flex items-center gap-2 text-stone-500"><Ic.Cl c="w-4 h-4"/>Duration: {a.dur}</div>}
                            {a.mp&&<div><span className="text-stone-500">Meeting: </span><span style={{color:B.dg}}>{a.mp}</span></div>}
                            {a.pr&&<div><span className="text-stone-500">Provider: </span><span className="text-stone-700">{a.pr}</span></div>}
                            {a.ct&&<div><span className="text-stone-500">Contact: </span><a href={`tel:${a.ct.replace(/[^0-9+]/g,'')}`} className="hover:underline" style={{color:B.dg}}>{a.ct}</a></div>}
                            {a.nt2&&<div className="bg-amber-50 border border-amber-200 rounded-lg p-2.5 text-amber-800"><b>Note:</b> {a.nt2}</div>}
                            {a.tk&&<div className="rounded-lg p-2.5 flex items-center gap-2" style={{backgroundColor:'#F0FAF5',border:`1px solid ${B.dg}`,color:B.dg}}><Ic.Ft c="w-4 h-4"/>Ticket attached</div>}
                            {accInfo&&<div className="bg-stone-50 rounded-lg p-3 mt-2"><h4 className="text-sm font-medium text-stone-700 mb-1.5">About {accInfo.n}</h4><p className="text-stone-600 text-sm leading-relaxed">{accInfo.ds}</p></div>}
                            {a.g&&G[a.g]&&<Gal imgs={G[a.g]} name={isExperience?a.ti:a.loc} isExp={isExperience}/>}
                            {edit&&(
                              <div className="border-2 border-dashed rounded-lg p-2.5" style={{borderColor:B.g,backgroundColor:'#FFFBEB'}}>
                                <label className="text-xs font-medium block mb-1" style={{color:B.g}}>Ops Note (Level III)</label>
                                <textarea value={notes[nk]||''} onChange={e=>setNotes(p=>({...p,[nk]:e.target.value}))} placeholder="Add note..." className="w-full text-sm p-2 border rounded bg-white focus:outline-none" style={{borderColor:B.g}} rows={2} maxLength={200}/>
                                <p className="text-xs mt-1 text-right" style={{color:B.g}}>{(notes[nk]||'').length}/200</p>
                              </div>
                            )}
                            {!edit&&notes[nk]&&<div className="bg-amber-50 border border-amber-200 rounded-lg p-2.5 text-amber-800"><b>Note:</b> {notes[nk]}</div>}
                          </div>
                        </div>
                      )}
                    </div>
                  );
                })}</div>
              </div>
            </section>
          ))}
          <section ref={el=>refs.current['emg']=el} className="min-h-screen px-6 py-20 text-stone-100" style={{backgroundColor:B.dg}}>
            <h2 className="font-serif text-3xl text-white text-center mb-10 italic">Emergency Contacts</h2>
            <div className="max-w-2xl mx-auto">
              <div className="bg-white/10 backdrop-blur-sm rounded-xl p-6 space-y-5">
                <div>
                  <h3 className="text-sm tracking-wide uppercase mb-2" style={{color:B.g}}>Business Hours (9 AM - 6 PM CET)</h3>
                  <p className="text-stone-300 mb-2">Specialist: <span className="text-white font-medium">{D.em.sp}</span></p>
                  <div className="flex flex-wrap gap-3">
                    <a href={`tel:${D.em.ph}`} className="inline-flex items-center gap-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors"><Ic.Ph c="w-5 h-5"/><span>{D.em.ph}</span></a>
                    <a href={`https://wa.me/${D.em.wa}?text=${encodeURIComponent('Hello! I am a guest on the Chapman Family Italy trip and need assistance.')}`} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors"><Ic.Wa c="w-5 h-5"/><span>WhatsApp</span></a>
                  </div>
                </div>
                <div className="border-t border-white/20 pt-5">
                  <h3 className="text-sm tracking-wide uppercase mb-2" style={{color:B.g}}>After Hours Emergency</h3>
                  <a href={`tel:${D.em.ep}`} className="inline-flex items-center gap-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors"><Ic.Ph c="w-5 h-5"/>{D.em.ep}</a>
                  <a href={`mailto:${D.em.em}`} className="text-stone-300 hover:text-white block mt-2">{D.em.em}</a>
                </div>
                <div className="border-t border-white/20 pt-5"><p className="text-stone-400 text-sm italic">Non-emergency changes require 1 business day notice.</p></div>
              </div>
              <div className="text-center mt-10">
                <p className="text-stone-300 text-sm">Welcome to Italy!</p>
                <p className="font-medium mt-1" style={{color:B.g}}>Authenticus Italy Team</p>
              </div>
            </div>
          </section>
          <section ref={el=>refs.current['faq']=el} className="min-h-screen px-6 py-20" style={{background:'linear-gradient(180deg, #FDF8F3 0%, #F5EDE4 100%)'}}>
            <h2 className="font-serif text-3xl text-center mb-3 italic" style={{color:'#8B4513'}}>Destination FAQ</h2>
            <p className="text-center text-stone-500 mb-10">Everything you need to know about traveling in Italy</p>
            <div className="max-w-3xl mx-auto space-y-6">
              {D.faq.map((cat,ci)=>(
                <div key={ci} className="bg-white rounded-2xl shadow-sm border border-stone-200 overflow-hidden">
                  <div className="px-6 py-4 border-b border-stone-100" style={{background:'linear-gradient(90deg, #FAF5F0 0%, #FFFFFF 100%)'}}>
                    <h3 className="font-medium text-lg flex items-center gap-3" style={{color:'#8B4513'}}>
                      <span className="text-2xl">{cat.icon}</span>
                      {cat.cat}
                    </h3>
                  </div>
                  <div className="divide-y divide-stone-100">
                    {cat.items.map((item,qi)=>{
                      const isOpen=faqOpen[`${ci}-${qi}`];
                      return(
                        <div key={qi} className="transition-colors hover:bg-stone-50">
                          <button onClick={()=>togFaq(ci,qi)} className="w-full px-6 py-4 text-left flex items-start justify-between gap-4">
                            <span className="font-medium text-stone-700">{item.q}</span>
                            <Ic.ChD c={`w-5 h-5 text-stone-400 shrink-0 transition-transform ${isOpen?'rotate-180':''}`}/>
                          </button>
                          {isOpen&&(
                            <div className="px-6 pb-4 -mt-2">
                              <p className="text-stone-600 text-sm leading-relaxed pl-0 border-l-2 pl-4" style={{borderColor:B.g}}>{item.a}</p>
                            </div>
                          )}
                        </div>
                      );
                    })}
                  </div>
                </div>
              ))}
              <div className="text-center pt-6">
                <p className="text-stone-500 text-sm mb-3">Have more questions?</p>
                <a href={`https://wa.me/${D.em.wa}?text=${encodeURIComponent('Hello! I have a question about my upcoming Italy trip.')}`} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-2 px-6 py-3 rounded-full text-white font-medium shadow-lg hover:shadow-xl transition-all" style={{backgroundColor:'#25D366'}}>
                  <Ic.Wa c="w-5 h-5"/>Ask Your Concierge
                </a>
              </div>
            </div>
          </section>
          <footer className="py-10 px-6 text-center" style={{backgroundColor:B.dg}}>
            <Logo className="h-14 w-auto mx-auto mb-3 opacity-80" inv/>
            <p className="text-stone-300 text-sm">¬© 2025 Authenticus Italy</p>
            <p className="text-stone-400 text-xs mt-1">Last updated: Jan 20, 2026</p>
          </footer>
        </div>
      </div>
      {showWaPanel&&<WhatsAppPanel onClose={()=>setShowWaPanel(false)} wa={D.em.wa} name={D.name}/>}
      {fullscreenMap&&<TripMap locs={D.locs} fullscreen={true} onToggleFs={()=>setFullscreenMap(false)} onSelect={()=>{}}/>}
      <button onClick={()=>setShowWaPanel(!showWaPanel)} className={`fixed bottom-5 right-5 text-white px-5 py-2.5 rounded-full shadow-lg hover:scale-105 transition-all flex items-center gap-2 z-30 no-print ${showWaPanel?'':'pulse-ring'}`} style={{backgroundColor:'#25D366'}}>
        <Ic.Wa c="w-5 h-5"/><span className="font-medium">{showWaPanel?'Close':'Chat with Concierge'}</span>
      </button>
    </div>
  );
}
ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
